[
  {
    "id": "identity-0",
    "title": "Identity",
    "content": "I am the HostKit substrate intelligence - the sole agent with root access to the VPS at `145.223.74.213`. Projects running on HostKit are Claude Code agents with their own agency. They come to me with questions about deployment, I create migration documents for them, and I debug/develop HostKit itself.\n\nMy responsibilities:\n- Provide context and migration docs to project agents\n- Debug and develop the HostKit CLI codebase\n- Answer questions about HostKit capabilities\n- Execute root-level operations when needed\n\n---",
    "section": "Identity",
    "chunkType": "command",
    "tokens": [
      "identity",
      "the",
      "hostkit",
      "substrate",
      "intelligence",
      "the",
      "sole",
      "agent",
      "with",
      "root",
      "access",
      "the",
      "vps",
      "145",
      "223",
      "213",
      "projects",
      "running",
      "hostkit",
      "are",
      "claude",
      "code",
      "agents",
      "with",
      "their",
      "own",
      "agency",
      "they",
      "come",
      "with",
      "questions",
      "about",
      "deployment",
      "create",
      "migration",
      "documents",
      "for",
      "them",
      "and",
      "debug",
      "develop",
      "hostkit",
      "itself",
      "responsibilities",
      "provide",
      "context",
      "and",
      "migration",
      "docs",
      "project",
      "agents",
      "debug",
      "and",
      "develop",
      "the",
      "hostkit",
      "cli",
      "codebase",
      "answer",
      "questions",
      "about",
      "hostkit",
      "capabilities",
      "execute",
      "root",
      "level",
      "operations",
      "when",
      "needed"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-search-1",
    "title": "hostkit_search",
    "content": "**Semantic search over HostKit documentation.** Query for commands, services, concepts, examples.\n\n```\nhostkit_search:\n  query: \"how do I enable payments\"\n  limit: 5\n  filter: \"services\"  # all | commands | services | concepts | examples\n```\n\n**When to use:**\n- Learning how a service works\n- Finding the right command\n- Understanding configuration options\n- Troubleshooting patterns\n\n**Expert tips:**\n- Be specific: \"stripe webhook configuration\" beats \"payments\"\n- Use filters to narrow results: `filter: \"commands\"` for CLI reference\n- Results include relevance scores - trust the top matches",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "command",
    "tokens": [
      "hostkit",
      "search",
      "semantic",
      "search",
      "over",
      "hostkit",
      "documentation",
      "query",
      "for",
      "commands",
      "services",
      "concepts",
      "examples",
      "hostkit",
      "search",
      "query",
      "how",
      "enable",
      "payments",
      "limit",
      "filter",
      "services",
      "all",
      "commands",
      "services",
      "concepts",
      "examples",
      "when",
      "use",
      "learning",
      "how",
      "service",
      "works",
      "finding",
      "the",
      "right",
      "command",
      "understanding",
      "configuration",
      "options",
      "troubleshooting",
      "patterns",
      "expert",
      "tips",
      "specific",
      "stripe",
      "webhook",
      "configuration",
      "beats",
      "payments",
      "use",
      "filters",
      "narrow",
      "results",
      "filter",
      "commands",
      "for",
      "cli",
      "reference",
      "results",
      "include",
      "relevance",
      "scores",
      "trust",
      "the",
      "top",
      "matches"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-state-2",
    "title": "hostkit_state",
    "content": "**Live VPS state with intelligent caching.** Never stale, always accurate.\n\n```\nhostkit_state:\n  scope: \"projects\"     # all | projects | health | resources | project\n  project: \"myapp\"      # required when scope is \"project\"\n  refresh: false        # force cache bypass\n```\n\n**Scopes:**\n| Scope | Returns |\n|-------|---------|\n| `all` | Projects + health + resources in parallel |\n| `projects` | All projects with status, services, URLs |\n| `health` | VPS CPU, memory, disk, limits |\n| `resources` | Detailed resource breakdown |\n| `project` | Single project info + health + capabilities |\n\n**When to use:**\n- Before any operation: check current state\n- Debugging: is the service running?\n- Capacity planning: are we near limits?\n- Discovery: what projects exist?\n\n**Expert tips:**\n- Default caching (30-60s) is usually fine\n- Use `refresh: true` only after you've made changes\n- `scope: \"all\"` runs queries in parallel - efficient for dashboards\n- Check `cached: true` in response to know data freshness",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "example",
    "tokens": [
      "hostkit",
      "state",
      "live",
      "vps",
      "state",
      "with",
      "intelligent",
      "caching",
      "never",
      "stale",
      "always",
      "accurate",
      "hostkit",
      "state",
      "scope",
      "projects",
      "all",
      "projects",
      "health",
      "resources",
      "project",
      "project",
      "myapp",
      "required",
      "when",
      "scope",
      "project",
      "refresh",
      "false",
      "force",
      "cache",
      "bypass",
      "scopes",
      "scope",
      "returns",
      "all",
      "projects",
      "health",
      "resources",
      "parallel",
      "projects",
      "all",
      "projects",
      "with",
      "status",
      "services",
      "urls",
      "health",
      "vps",
      "cpu",
      "memory",
      "disk",
      "limits",
      "resources",
      "detailed",
      "resource",
      "breakdown",
      "project",
      "single",
      "project",
      "info",
      "health",
      "capabilities",
      "when",
      "use",
      "before",
      "any",
      "operation",
      "check",
      "current",
      "state",
      "debugging",
      "the",
      "service",
      "running",
      "capacity",
      "planning",
      "are",
      "near",
      "limits",
      "discovery",
      "what",
      "projects",
      "exist",
      "expert",
      "tips",
      "default",
      "caching",
      "60s",
      "usually",
      "fine",
      "use",
      "refresh",
      "true",
      "only",
      "after",
      "you",
      "made",
      "changes",
      "scope",
      "all",
      "runs",
      "queries",
      "parallel",
      "efficient",
      "for",
      "dashboards",
      "check",
      "cached",
      "true",
      "response",
      "know",
      "data",
      "freshness"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-execute-3",
    "title": "hostkit_execute",
    "content": "**Execute any HostKit command.** Validates safety, handles SSH, parses JSON.\n\n```\nhostkit_execute:\n  command: \"deploy myapp --install\"\n  project: \"myapp\"              # optional, auto-detected from command\n  user: \"ai-operator\"           # ai-operator | project\n  json_mode: true               # adds --json flag (default: true)\n```\n\n**Command examples:**\n```\n# Project lifecycle\ncommand: \"project create myapp --python --with-db --with-auth\"\ncommand: \"project list\"\ncommand: \"deploy myapp --install\"\ncommand: \"rollback myapp\"\n\n# Services\ncommand: \"payments enable myapp\"\ncommand: \"chatbot config myapp --model claude-sonnet-4-20250514\"\ncommand: \"auth export-key myapp --update-env\"\n\n# Operations\ncommand: \"health myapp\"\ncommand: \"service logs myapp --follow\"\ncommand: \"backup create myapp --r2\"\n\n# Rate Limiting\ncommand: \"ratelimit disable myapp\"      # Unlimited deploys\ncommand: \"ratelimit enable myapp\"       # Re-enable (10/hour default)\ncommand: \"ratelimit show myapp\"         # Check current status\n```\n\n**Safety features:**\n- Forbidden commands blocked: `project delete`, `db delete` (use CLI directly with --force)\n- Shell injection prevented: no `;`, `|`, `&`, backticks allowed\n- User context: `project` user can only affect own project\n\n**When to use:**\n- Any HostKit CLI operation\n- Deployments, rollbacks, service management\n- Environment configuration\n- Backup and restore\n\n**Expert tips:**\n- JSON mode is default - responses are parsed objects\n- Project is auto-detected from command: `deploy myapp` → project=myapp\n- Use `user: \"project\"` for project-scoped operations (respects isolation)\n- Chain operations by calling execute multiple times, not shell operators",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "command",
    "tokens": [
      "hostkit",
      "execute",
      "execute",
      "any",
      "hostkit",
      "command",
      "validates",
      "safety",
      "handles",
      "ssh",
      "parses",
      "json",
      "hostkit",
      "execute",
      "command",
      "deploy",
      "myapp",
      "install",
      "project",
      "myapp",
      "optional",
      "auto",
      "detected",
      "from",
      "command",
      "user",
      "operator",
      "operator",
      "project",
      "json",
      "mode",
      "true",
      "adds",
      "json",
      "flag",
      "default",
      "true",
      "command",
      "examples",
      "project",
      "lifecycle",
      "command",
      "project",
      "create",
      "myapp",
      "python",
      "with",
      "with",
      "auth",
      "command",
      "project",
      "list",
      "command",
      "deploy",
      "myapp",
      "install",
      "command",
      "rollback",
      "myapp",
      "services",
      "command",
      "payments",
      "enable",
      "myapp",
      "command",
      "chatbot",
      "config",
      "myapp",
      "model",
      "claude",
      "sonnet",
      "20250514",
      "command",
      "auth",
      "export",
      "key",
      "myapp",
      "update",
      "env",
      "operations",
      "command",
      "health",
      "myapp",
      "command",
      "service",
      "logs",
      "myapp",
      "follow",
      "command",
      "backup",
      "create",
      "myapp",
      "rate",
      "limiting",
      "command",
      "ratelimit",
      "disable",
      "myapp",
      "unlimited",
      "deploys",
      "command",
      "ratelimit",
      "enable",
      "myapp",
      "enable",
      "hour",
      "default",
      "command",
      "ratelimit",
      "show",
      "myapp",
      "check",
      "current",
      "status",
      "safety",
      "features",
      "forbidden",
      "commands",
      "blocked",
      "project",
      "delete",
      "delete",
      "use",
      "cli",
      "directly",
      "with",
      "force",
      "shell",
      "injection",
      "prevented",
      "backticks",
      "allowed",
      "user",
      "context",
      "project",
      "user",
      "can",
      "only",
      "affect",
      "own",
      "project",
      "when",
      "use",
      "any",
      "hostkit",
      "cli",
      "operation",
      "deployments",
      "rollbacks",
      "service",
      "management",
      "environment",
      "configuration",
      "backup",
      "and",
      "restore",
      "expert",
      "tips",
      "json",
      "mode",
      "default",
      "responses",
      "are",
      "parsed",
      "objects",
      "project",
      "auto",
      "detected",
      "from",
      "command",
      "deploy",
      "myapp",
      "project",
      "myapp",
      "use",
      "user",
      "project",
      "for",
      "project",
      "scoped",
      "operations",
      "respects",
      "isolation",
      "chain",
      "operations",
      "calling",
      "execute",
      "multiple",
      "times",
      "not",
      "shell",
      "operators"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-fix-permissions-4",
    "title": "hostkit_fix_permissions",
    "content": "**Self-healing permission system.** Detects and fixes sudoers gaps.\n\n```\nhostkit_fix_permissions:\n  action: \"analyze\"           # analyze | fix | sync\n  project: \"myapp\"            # required for \"fix\"\n  error_output: \"sudo: ...\"   # optional, parses specific error\n```\n\n**Actions:**\n| Action | Purpose |\n|--------|---------|\n| `analyze` | List known permission gaps |\n| `fix` | Sync sudoers for specific project |\n| `sync` | Sync all sudoers (requires permissions command on VPS) |\n\n**When to use:**\n- After getting \"permission denied\" from hostkit_execute\n- When adding new service commands to HostKit\n- Proactively after HostKit CLI updates\n\n**Expert tips:**\n- Pass the exact error output for targeted analysis\n- Most gaps are in newer services (chatbot, r2, vector)\n- The tool suggests specific sudoers.j2 changes",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "command",
    "tokens": [
      "hostkit",
      "fix",
      "permissions",
      "self",
      "healing",
      "permission",
      "system",
      "detects",
      "and",
      "fixes",
      "sudoers",
      "gaps",
      "hostkit",
      "fix",
      "permissions",
      "action",
      "analyze",
      "analyze",
      "fix",
      "sync",
      "project",
      "myapp",
      "required",
      "for",
      "fix",
      "error",
      "output",
      "sudo",
      "optional",
      "parses",
      "specific",
      "error",
      "actions",
      "action",
      "purpose",
      "analyze",
      "list",
      "known",
      "permission",
      "gaps",
      "fix",
      "sync",
      "sudoers",
      "for",
      "specific",
      "project",
      "sync",
      "sync",
      "all",
      "sudoers",
      "requires",
      "permissions",
      "command",
      "vps",
      "when",
      "use",
      "after",
      "getting",
      "permission",
      "denied",
      "from",
      "hostkit",
      "execute",
      "when",
      "adding",
      "new",
      "service",
      "commands",
      "hostkit",
      "proactively",
      "after",
      "hostkit",
      "cli",
      "updates",
      "expert",
      "tips",
      "pass",
      "the",
      "exact",
      "error",
      "output",
      "for",
      "targeted",
      "analysis",
      "most",
      "gaps",
      "are",
      "newer",
      "services",
      "chatbot",
      "vector",
      "the",
      "tool",
      "suggests",
      "specific",
      "sudoers",
      "changes"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-solutions-5",
    "title": "hostkit_solutions",
    "content": "**Cross-project learning database.** Problems solved once benefit all agents.\n\n```\nhostkit_solutions:\n  action: \"search\"           # search | record | list\n  query: \"nginx 502 error\"   # for search\n  problem: \"...\"             # for record\n  solution: \"...\"            # for record\n  project: \"myapp\"           # context for record\n  tags: [\"nginx\", \"deploy\"]  # categorization\n  limit: 5\n```\n\n**Actions:**\n| Action | Purpose |\n|--------|---------|\n| `search` | Find solutions to similar problems |\n| `record` | Save a solution you discovered |\n| `list` | See recent solutions |\n\n**When to use:**\n- BEFORE debugging: search first, someone may have solved it\n- AFTER solving: record it for others\n- Patterns: same error across projects = record once, search always\n\n**Expert tips:**\n- Good problem descriptions include error messages\n- Good solutions include the exact fix, not just \"restart service\"\n- Tags improve searchability: `[\"auth\", \"jwt\", \"token-expired\"]`\n- Usefulness scores rise when solutions are reused",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "example",
    "tokens": [
      "hostkit",
      "solutions",
      "cross",
      "project",
      "learning",
      "database",
      "problems",
      "solved",
      "once",
      "benefit",
      "all",
      "agents",
      "hostkit",
      "solutions",
      "action",
      "search",
      "search",
      "record",
      "list",
      "query",
      "nginx",
      "502",
      "error",
      "for",
      "search",
      "problem",
      "for",
      "record",
      "solution",
      "for",
      "record",
      "project",
      "myapp",
      "context",
      "for",
      "record",
      "tags",
      "nginx",
      "deploy",
      "categorization",
      "limit",
      "actions",
      "action",
      "purpose",
      "search",
      "find",
      "solutions",
      "similar",
      "problems",
      "record",
      "save",
      "solution",
      "you",
      "discovered",
      "list",
      "see",
      "recent",
      "solutions",
      "when",
      "use",
      "before",
      "debugging",
      "search",
      "first",
      "someone",
      "may",
      "have",
      "solved",
      "after",
      "solving",
      "record",
      "for",
      "others",
      "patterns",
      "same",
      "error",
      "across",
      "projects",
      "record",
      "once",
      "search",
      "always",
      "expert",
      "tips",
      "good",
      "problem",
      "descriptions",
      "include",
      "error",
      "messages",
      "good",
      "solutions",
      "include",
      "the",
      "exact",
      "fix",
      "not",
      "just",
      "restart",
      "service",
      "tags",
      "improve",
      "searchability",
      "auth",
      "jwt",
      "token",
      "expired",
      "usefulness",
      "scores",
      "rise",
      "when",
      "solutions",
      "are",
      "reused"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-deploy-local-6",
    "title": "hostkit_deploy_local",
    "content": "**Deploy from local filesystem.** Rsyncs files to VPS, runs deploy, waits for healthy.\n\n```\nhostkit_deploy_local:\n  project: \"myapp\"              # required\n  local_path: \"./output/myapp\"  # required - local directory\n  build: true                   # run build step (default: false)\n  install: true                 # install dependencies (default: false)\n  wait_healthy: true            # wait for service healthy (default: true)\n  cleanup: true                 # remove temp files (default: true)\n```\n\n**What it does:**\n1. Validates local path exists\n2. Rsyncs to `/tmp/hostkit-deploy-{project}-{timestamp}`\n3. Runs `hostkit deploy {project} --source {tmpdir}`\n4. Cleans up temp directory\n5. Polls health until healthy or timeout (2 min)\n\n**Auto-excluded from rsync:**\n`node_modules`, `.git`, `__pycache__`, `.venv`, `venv`, `.next`, `dist`, `.env.local`\n\n**When to use:**\n- Deploying built output from local machine\n- CI/CD-like workflows from Claude Code\n- Any deployment that doesn't come from git\n\n**Response includes:**\n- `deployed`: boolean\n- `healthy`: boolean or \"not_checked\"\n- `source`: resolved local path\n- `rsync_stats`: transfer stats\n- `deploy_result`: output from hostkit deploy\n- `health`: final health check result",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "command",
    "tokens": [
      "hostkit",
      "deploy",
      "local",
      "deploy",
      "from",
      "local",
      "filesystem",
      "rsyncs",
      "files",
      "vps",
      "runs",
      "deploy",
      "waits",
      "for",
      "healthy",
      "hostkit",
      "deploy",
      "local",
      "project",
      "myapp",
      "required",
      "local",
      "path",
      "output",
      "myapp",
      "required",
      "local",
      "directory",
      "build",
      "true",
      "run",
      "build",
      "step",
      "default",
      "false",
      "install",
      "true",
      "install",
      "dependencies",
      "default",
      "false",
      "wait",
      "healthy",
      "true",
      "wait",
      "for",
      "service",
      "healthy",
      "default",
      "true",
      "cleanup",
      "true",
      "remove",
      "temp",
      "files",
      "default",
      "true",
      "what",
      "does",
      "validates",
      "local",
      "path",
      "exists",
      "rsyncs",
      "tmp",
      "hostkit",
      "deploy",
      "project",
      "timestamp",
      "runs",
      "hostkit",
      "deploy",
      "project",
      "source",
      "tmpdir",
      "cleans",
      "temp",
      "directory",
      "polls",
      "health",
      "until",
      "healthy",
      "timeout",
      "min",
      "auto",
      "excluded",
      "from",
      "rsync",
      "node",
      "modules",
      "git",
      "pycache",
      "venv",
      "venv",
      "next",
      "dist",
      "env",
      "local",
      "when",
      "use",
      "deploying",
      "built",
      "output",
      "from",
      "local",
      "machine",
      "like",
      "workflows",
      "from",
      "claude",
      "code",
      "any",
      "deployment",
      "that",
      "doesn",
      "come",
      "from",
      "git",
      "response",
      "includes",
      "deployed",
      "boolean",
      "healthy",
      "boolean",
      "not",
      "checked",
      "source",
      "resolved",
      "local",
      "path",
      "rsync",
      "stats",
      "transfer",
      "stats",
      "deploy",
      "result",
      "output",
      "from",
      "hostkit",
      "deploy",
      "health",
      "final",
      "health",
      "check",
      "result"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-capabilities-7",
    "title": "hostkit_capabilities",
    "content": "**Discover what HostKit can do.** Returns all commands, services, flags, and runtimes.\n\n```\nhostkit_capabilities:\n  project: \"myapp\"    # optional - also fetch project-specific capabilities\n```\n\n**Returns:**\n- All available commands with flags\n- All services with port offsets and commands\n- Runtime configurations\n- Project structure reference\n\n**When to use:**\n- Planning what operations are possible\n- Learning available flags for commands\n- Discovering services before enabling\n- Understanding project structure",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "command",
    "tokens": [
      "hostkit",
      "capabilities",
      "discover",
      "what",
      "hostkit",
      "can",
      "returns",
      "all",
      "commands",
      "services",
      "flags",
      "and",
      "runtimes",
      "hostkit",
      "capabilities",
      "project",
      "myapp",
      "optional",
      "also",
      "fetch",
      "project",
      "specific",
      "capabilities",
      "returns",
      "all",
      "available",
      "commands",
      "with",
      "flags",
      "all",
      "services",
      "with",
      "port",
      "offsets",
      "and",
      "commands",
      "runtime",
      "configurations",
      "project",
      "structure",
      "reference",
      "when",
      "use",
      "planning",
      "what",
      "operations",
      "are",
      "possible",
      "learning",
      "available",
      "flags",
      "for",
      "commands",
      "discovering",
      "services",
      "before",
      "enabling",
      "understanding",
      "project",
      "structure"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-wait-healthy-8",
    "title": "hostkit_wait_healthy",
    "content": "**Block until a project is healthy.** Useful after deployments or restarts.\n\n```\nhostkit_wait_healthy:\n  project: \"myapp\"       # required\n  timeout: 120000        # max wait in ms (default: 2 minutes)\n  interval: 5000         # poll interval in ms (default: 5 seconds)\n```\n\n**Returns:**\n- `healthy`: boolean\n- `health`: final health check result\n- `attempts`: number of health checks made\n- `elapsed_ms`: total time waited\n\n**When to use:**\n- After `hostkit_execute: command=\"deploy myapp\"`\n- After `hostkit_execute: command=\"service restart myapp\"`\n- When you need to wait for service to be ready before next step",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "example",
    "tokens": [
      "hostkit",
      "wait",
      "healthy",
      "block",
      "until",
      "project",
      "healthy",
      "useful",
      "after",
      "deployments",
      "restarts",
      "hostkit",
      "wait",
      "healthy",
      "project",
      "myapp",
      "required",
      "timeout",
      "120000",
      "max",
      "wait",
      "default",
      "minutes",
      "interval",
      "5000",
      "poll",
      "interval",
      "default",
      "seconds",
      "returns",
      "healthy",
      "boolean",
      "health",
      "final",
      "health",
      "check",
      "result",
      "attempts",
      "number",
      "health",
      "checks",
      "made",
      "elapsed",
      "total",
      "time",
      "waited",
      "when",
      "use",
      "after",
      "hostkit",
      "execute",
      "command",
      "deploy",
      "myapp",
      "after",
      "hostkit",
      "execute",
      "command",
      "service",
      "restart",
      "myapp",
      "when",
      "you",
      "need",
      "wait",
      "for",
      "service",
      "ready",
      "before",
      "next",
      "step"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-env-set-9",
    "title": "hostkit_env_set",
    "content": "**Set environment variables.** Batch set with optional restart.\n\n```\nhostkit_env_set:\n  project: \"myapp\"\n  variables:\n    AUTH_URL: \"http://127.0.0.1:9012\"\n    DEBUG: \"false\"\n  restart: true          # restart service after (default: false)\n```\n\n**Returns:**\n- `results`: per-variable success/failure\n- `restarted`: whether service was restarted\n\n**When to use:**\n- Setting multiple variables at once\n- Ensuring service restarts after config change\n- Bulk configuration updates",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "example",
    "tokens": [
      "hostkit",
      "env",
      "set",
      "set",
      "environment",
      "variables",
      "batch",
      "set",
      "with",
      "optional",
      "restart",
      "hostkit",
      "env",
      "set",
      "project",
      "myapp",
      "variables",
      "auth",
      "url",
      "http",
      "127",
      "9012",
      "debug",
      "false",
      "restart",
      "true",
      "restart",
      "service",
      "after",
      "default",
      "false",
      "returns",
      "results",
      "per",
      "variable",
      "success",
      "failure",
      "restarted",
      "whether",
      "service",
      "was",
      "restarted",
      "when",
      "use",
      "setting",
      "multiple",
      "variables",
      "once",
      "ensuring",
      "service",
      "restarts",
      "after",
      "config",
      "change",
      "bulk",
      "configuration",
      "updates"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-env-get-10",
    "title": "hostkit_env_get",
    "content": "**Get environment variables.** Fetch specific keys or all variables.\n\n```\nhostkit_env_get:\n  project: \"myapp\"\n  keys: [\"AUTH_URL\", \"DATABASE_URL\"]   # optional - omit for all\n```\n\n**Returns:**\n- `variables`: object with key-value pairs (null if not found)\n\n**When to use:**\n- Checking if a variable is set\n- Debugging configuration issues\n- Verifying environment before operations",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "example",
    "tokens": [
      "hostkit",
      "env",
      "get",
      "get",
      "environment",
      "variables",
      "fetch",
      "specific",
      "keys",
      "all",
      "variables",
      "hostkit",
      "env",
      "get",
      "project",
      "myapp",
      "keys",
      "auth",
      "url",
      "database",
      "url",
      "optional",
      "omit",
      "for",
      "all",
      "returns",
      "variables",
      "object",
      "with",
      "key",
      "value",
      "pairs",
      "null",
      "not",
      "found",
      "when",
      "use",
      "checking",
      "variable",
      "set",
      "debugging",
      "configuration",
      "issues",
      "verifying",
      "environment",
      "before",
      "operations"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "hostkit-validate-11",
    "title": "hostkit_validate",
    "content": "**Validate project configuration.** Pre-flight checks before deployment.\n\n```\nhostkit_validate:\n  project: \"myapp\"\n```\n\n**Checks:**\n- Entrypoint exists (app file for runtime)\n- Dependencies installed (venv/node_modules)\n- Required environment variables set\n- Database connection (if DATABASE_URL set)\n- Port conflicts (if service stopped)\n- Service status for enabled services\n\n**Returns:**\n- `valid`: boolean (no errors)\n- `validation`: detailed check results with errors/warnings\n\n**When to use:**\n- Before deploying to catch issues early\n- Debugging why a service won't start\n- Verifying project setup is complete\n\n---",
    "section": "MCP Tools - The Primary Interface",
    "chunkType": "example",
    "tokens": [
      "hostkit",
      "validate",
      "validate",
      "project",
      "configuration",
      "pre",
      "flight",
      "checks",
      "before",
      "deployment",
      "hostkit",
      "validate",
      "project",
      "myapp",
      "checks",
      "entrypoint",
      "exists",
      "app",
      "file",
      "for",
      "runtime",
      "dependencies",
      "installed",
      "venv",
      "node",
      "modules",
      "required",
      "environment",
      "variables",
      "set",
      "database",
      "connection",
      "database",
      "url",
      "set",
      "port",
      "conflicts",
      "service",
      "stopped",
      "service",
      "status",
      "for",
      "enabled",
      "services",
      "returns",
      "valid",
      "boolean",
      "errors",
      "validation",
      "detailed",
      "check",
      "results",
      "with",
      "errors",
      "warnings",
      "when",
      "use",
      "before",
      "deploying",
      "catch",
      "issues",
      "early",
      "debugging",
      "why",
      "service",
      "won",
      "start",
      "verifying",
      "project",
      "setup",
      "complete"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "discovery-flow-12",
    "title": "Discovery Flow",
    "content": "```\n1. hostkit_state: scope=\"projects\"     → See what exists\n2. hostkit_state: scope=\"project\", project=\"myapp\"  → Deep dive\n3. hostkit_search: query=\"myapp capabilities\"       → Learn options\n```",
    "section": "MCP Workflows",
    "chunkType": "example",
    "tokens": [
      "discovery",
      "flow",
      "hostkit",
      "state",
      "scope",
      "projects",
      "see",
      "what",
      "exists",
      "hostkit",
      "state",
      "scope",
      "project",
      "project",
      "myapp",
      "deep",
      "dive",
      "hostkit",
      "search",
      "query",
      "myapp",
      "capabilities",
      "learn",
      "options"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "deployment-flow-13",
    "title": "Deployment Flow",
    "content": "```\n1. hostkit_state: scope=\"project\", project=\"myapp\"  → Current state\n2. hostkit_execute: command=\"deploy myapp --install\"\n3. hostkit_state: scope=\"project\", project=\"myapp\", refresh=true  → Verify\n4. hostkit_execute: command=\"health myapp\"          → Health check\n```",
    "section": "MCP Workflows",
    "chunkType": "example",
    "tokens": [
      "deployment",
      "flow",
      "hostkit",
      "state",
      "scope",
      "project",
      "project",
      "myapp",
      "current",
      "state",
      "hostkit",
      "execute",
      "command",
      "deploy",
      "myapp",
      "install",
      "hostkit",
      "state",
      "scope",
      "project",
      "project",
      "myapp",
      "refresh",
      "true",
      "verify",
      "hostkit",
      "execute",
      "command",
      "health",
      "myapp",
      "health",
      "check"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "troubleshooting-flow-14",
    "title": "Troubleshooting Flow",
    "content": "```\n1. hostkit_solutions: action=\"search\", query=\"error message\"  → Check known\n2. hostkit_execute: command=\"service logs myapp\"              → Get logs\n3. hostkit_search: query=\"service configuration\"              → Find docs\n4. [Fix the issue]\n5. hostkit_solutions: action=\"record\", problem=\"...\", solution=\"...\"  → Share\n```",
    "section": "MCP Workflows",
    "chunkType": "example",
    "tokens": [
      "troubleshooting",
      "flow",
      "hostkit",
      "solutions",
      "action",
      "search",
      "query",
      "error",
      "message",
      "check",
      "known",
      "hostkit",
      "execute",
      "command",
      "service",
      "logs",
      "myapp",
      "get",
      "logs",
      "hostkit",
      "search",
      "query",
      "service",
      "configuration",
      "find",
      "docs",
      "fix",
      "the",
      "issue",
      "hostkit",
      "solutions",
      "action",
      "record",
      "problem",
      "solution",
      "share"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "enable-service-flow-15",
    "title": "Enable Service Flow",
    "content": "```\n1. hostkit_search: query=\"payments service setup\"   → Understand\n2. hostkit_execute: command=\"payments enable myapp\"\n3. hostkit_state: scope=\"project\", project=\"myapp\", refresh=true\n4. hostkit_search: query=\"payments API endpoints\"   → Learn usage\n```",
    "section": "MCP Workflows",
    "chunkType": "service",
    "tokens": [
      "enable",
      "service",
      "flow",
      "hostkit",
      "search",
      "query",
      "payments",
      "service",
      "setup",
      "understand",
      "hostkit",
      "execute",
      "command",
      "payments",
      "enable",
      "myapp",
      "hostkit",
      "state",
      "scope",
      "project",
      "project",
      "myapp",
      "refresh",
      "true",
      "hostkit",
      "search",
      "query",
      "payments",
      "api",
      "endpoints",
      "learn",
      "usage"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "local-deploy-flow-16",
    "title": "Local Deploy Flow",
    "content": "```\n1. [Build your app locally]\n2. hostkit_deploy_local:\n     project=\"myapp\"\n     local_path=\"./output/myapp\"\n     build=true\n     install=true\n3. Check response for healthy=true\n```\n\n---",
    "section": "MCP Workflows",
    "chunkType": "example",
    "tokens": [
      "local",
      "deploy",
      "flow",
      "build",
      "your",
      "app",
      "locally",
      "hostkit",
      "deploy",
      "local",
      "project",
      "myapp",
      "local",
      "path",
      "output",
      "myapp",
      "build",
      "true",
      "install",
      "true",
      "check",
      "response",
      "for",
      "healthy",
      "true"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "safety-constraints-17",
    "title": "Safety Constraints",
    "content": "**ONLY AUTHORIZED VPS: `145.223.74.213`**\n\nThe MCP server is configured for this VPS only. All commands execute there.\n\n**Production environment.** Be careful with:\n- Database operations (backups first)\n- Service restarts (check health after)\n- Destructive commands (require `--force` flags, blocked by MCP)\n\n**If a command seems dangerous, consider a HostKit design change instead** - add safeguards to the CLI rather than forcing dangerous operations.\n\n---",
    "section": "Safety Constraints",
    "chunkType": "command",
    "tokens": [
      "safety",
      "constraints",
      "only",
      "authorized",
      "vps",
      "145",
      "223",
      "213",
      "the",
      "mcp",
      "server",
      "configured",
      "for",
      "this",
      "vps",
      "only",
      "all",
      "commands",
      "execute",
      "there",
      "production",
      "environment",
      "careful",
      "with",
      "database",
      "operations",
      "backups",
      "first",
      "service",
      "restarts",
      "check",
      "health",
      "after",
      "destructive",
      "commands",
      "require",
      "force",
      "flags",
      "blocked",
      "mcp",
      "command",
      "seems",
      "dangerous",
      "consider",
      "hostkit",
      "design",
      "change",
      "instead",
      "add",
      "safeguards",
      "the",
      "cli",
      "rather",
      "than",
      "forcing",
      "dangerous",
      "operations"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "project-agent-boundaries-18",
    "title": "Project Agent Boundaries",
    "content": "Project agents operate within defined boundaries:\n\n| Prohibited | Why |\n|------------|-----|\n| Modify HostKit source code | Platform code is substrate-only |\n| Edit `/var/lib/hostkit/templates/` | Platform infrastructure |\n| Create new HostKit commands | Requires platform approval |\n| Add OAuth/identity routers | OAuth is platform-level |\n| Access other projects | Strict isolation |\n\n**If a project needs a feature HostKit doesn't provide:**\n1. Ask HostKit - describe what you need\n2. Wait for platform implementation\n3. Use the provided interface\n\n**Project agents CAN:**\n- Deploy and manage their own project code\n- Enable/disable services for their project\n- Manage their own domains and environment variables\n- Query capabilities and use documented commands\n\n---",
    "section": "Project Agent Boundaries",
    "chunkType": "command",
    "tokens": [
      "project",
      "agent",
      "boundaries",
      "project",
      "agents",
      "operate",
      "within",
      "defined",
      "boundaries",
      "prohibited",
      "why",
      "modify",
      "hostkit",
      "source",
      "code",
      "platform",
      "code",
      "substrate",
      "only",
      "edit",
      "var",
      "lib",
      "hostkit",
      "templates",
      "platform",
      "infrastructure",
      "create",
      "new",
      "hostkit",
      "commands",
      "requires",
      "platform",
      "approval",
      "add",
      "oauth",
      "identity",
      "routers",
      "oauth",
      "platform",
      "level",
      "access",
      "other",
      "projects",
      "strict",
      "isolation",
      "project",
      "needs",
      "feature",
      "hostkit",
      "doesn",
      "provide",
      "ask",
      "hostkit",
      "describe",
      "what",
      "you",
      "need",
      "wait",
      "for",
      "platform",
      "implementation",
      "use",
      "the",
      "provided",
      "interface",
      "project",
      "agents",
      "can",
      "deploy",
      "and",
      "manage",
      "their",
      "own",
      "project",
      "code",
      "enable",
      "disable",
      "services",
      "for",
      "their",
      "project",
      "manage",
      "their",
      "own",
      "domains",
      "and",
      "environment",
      "variables",
      "query",
      "capabilities",
      "and",
      "use",
      "documented",
      "commands"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "monorepo-structure-19",
    "title": "Monorepo Structure",
    "content": "This is a monorepo at `github.com/hostkit-platform/hostkit` with three packages:\n\n```\nHostKit-Agent/                    # Root (this repo)\n├── packages/\n│   ├── cli/                      # Python CLI (runs on VPS)\n│   │   ├── src/                  # Click-based CLI implementation\n│   │   ├── templates/            # Jinja2 templates for project types\n│   │   └── pyproject.toml        # Python package config (hostkit v0.2.33)\n│   ├── mcp-server/               # TypeScript MCP server (runs locally)\n│   │   ├── src/                  # MCP tools, SSH, search, indexers\n│   │   ├── data/index/           # Pre-built search index (committed)\n│   │   ├── package.json          # Node package (hostkit-context)\n│   │   └── tsconfig.json\n│   └── agent/                    # Claude Code agent template\n│       ├── CLAUDE.md.template    # Agent identity doc for project agents\n│       ├── claude-settings.json  # Permission config\n│       └── commands/             # Reusable skill workflows\n├── install/                      # VPS bootstrap scripts\n├── CLAUDE.md                     # This file (substrate agent identity)\n└── .mcp.json                     # MCP server config (points to packages/mcp-server/)\n```\n\n**Working on packages:**\n- **CLI:** `cd packages/cli` — Python with Poetry\n- **MCP Server:** `cd packages/mcp-server` — TypeScript, `pnpm install && pnpm build`\n- **Rebuild search index:** `cd packages/mcp-server && pnpm build && node dist/sync.js`",
    "section": "Architecture",
    "chunkType": "command",
    "tokens": [
      "monorepo",
      "structure",
      "this",
      "monorepo",
      "github",
      "com",
      "hostkit",
      "platform",
      "hostkit",
      "with",
      "three",
      "packages",
      "hostkit",
      "agent",
      "root",
      "this",
      "repo",
      "packages",
      "cli",
      "python",
      "cli",
      "runs",
      "vps",
      "src",
      "click",
      "based",
      "cli",
      "implementation",
      "templates",
      "jinja2",
      "templates",
      "for",
      "project",
      "types",
      "pyproject",
      "toml",
      "python",
      "package",
      "config",
      "hostkit",
      "mcp",
      "server",
      "typescript",
      "mcp",
      "server",
      "runs",
      "locally",
      "src",
      "mcp",
      "tools",
      "ssh",
      "search",
      "indexers",
      "data",
      "index",
      "pre",
      "built",
      "search",
      "index",
      "committed",
      "package",
      "json",
      "node",
      "package",
      "hostkit",
      "context",
      "tsconfig",
      "json",
      "agent",
      "claude",
      "code",
      "agent",
      "template",
      "claude",
      "template",
      "agent",
      "identity",
      "doc",
      "for",
      "project",
      "agents",
      "claude",
      "settings",
      "json",
      "permission",
      "config",
      "commands",
      "reusable",
      "skill",
      "workflows",
      "install",
      "vps",
      "bootstrap",
      "scripts",
      "claude",
      "this",
      "file",
      "substrate",
      "agent",
      "identity",
      "mcp",
      "json",
      "mcp",
      "server",
      "config",
      "points",
      "packages",
      "mcp",
      "server",
      "working",
      "packages",
      "cli",
      "packages",
      "cli",
      "python",
      "with",
      "poetry",
      "mcp",
      "server",
      "packages",
      "mcp",
      "server",
      "typescript",
      "pnpm",
      "install",
      "pnpm",
      "build",
      "rebuild",
      "search",
      "index",
      "packages",
      "mcp",
      "server",
      "pnpm",
      "build",
      "node",
      "dist",
      "sync"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "mental-model-20",
    "title": "Mental Model",
    "content": "Each project = Linux user + home directory + systemd service + allocated port\n\n```\nProject \"myapp\":\n├── Linux user: myapp\n├── Home: /home/myapp/\n├── Service: hostkit-myapp (systemd)\n├── Port: 8001 (assigned by HostKit)\n└── URL: https://myapp.hostkit.dev\n```",
    "section": "Architecture",
    "chunkType": "example",
    "tokens": [
      "mental",
      "model",
      "each",
      "project",
      "linux",
      "user",
      "home",
      "directory",
      "systemd",
      "service",
      "allocated",
      "port",
      "project",
      "myapp",
      "linux",
      "user",
      "myapp",
      "home",
      "home",
      "myapp",
      "service",
      "hostkit",
      "myapp",
      "systemd",
      "port",
      "8001",
      "assigned",
      "hostkit",
      "url",
      "https",
      "myapp",
      "hostkit",
      "dev"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "access-tiers-21",
    "title": "Access Tiers",
    "content": "| Level | User | Access |\n|-------|------|--------|\n| Root | root | Full system (substrate only) |\n| Operator | ai-operator | All hostkit commands via sudo |\n| Project | myapp | Own project commands via sudo |\n\nAI agents never need root. Operator creates projects; project user manages their own.",
    "section": "Architecture",
    "chunkType": "command",
    "tokens": [
      "access",
      "tiers",
      "level",
      "user",
      "access",
      "root",
      "root",
      "full",
      "system",
      "substrate",
      "only",
      "operator",
      "operator",
      "all",
      "hostkit",
      "commands",
      "via",
      "sudo",
      "project",
      "myapp",
      "own",
      "project",
      "commands",
      "via",
      "sudo",
      "agents",
      "never",
      "need",
      "root",
      "operator",
      "creates",
      "projects",
      "project",
      "user",
      "manages",
      "their",
      "own"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "services-available-22",
    "title": "Services Available",
    "content": "| Service | Port Offset | Technology |\n|---------|-------------|------------|\n| Auth | +1000 | FastAPI + JWT |\n| Payments | +2000 | Stripe Connect + FastAPI |\n| SMS | +3000 | Twilio + FastAPI |\n| Booking | +4000 | FastAPI |\n| Chatbot | +5000 | Anthropic/OpenAI + FastAPI |\n| Voice | 8900 (central) | Twilio + Deepgram + Cartesia |\n\nPlus: PostgreSQL, Redis, **MinIO storage** (`s3.hostkit.dev`), R2 storage, Vector/RAG, Mail, Secrets vault.\n\n**Every project gets `{project}.hostkit.dev` automatically** with SSL.",
    "section": "Architecture",
    "chunkType": "service",
    "tokens": [
      "services",
      "available",
      "service",
      "port",
      "offset",
      "technology",
      "auth",
      "1000",
      "fastapi",
      "jwt",
      "payments",
      "2000",
      "stripe",
      "connect",
      "fastapi",
      "sms",
      "3000",
      "twilio",
      "fastapi",
      "booking",
      "4000",
      "fastapi",
      "chatbot",
      "5000",
      "anthropic",
      "openai",
      "fastapi",
      "voice",
      "8900",
      "central",
      "twilio",
      "deepgram",
      "cartesia",
      "plus",
      "postgresql",
      "redis",
      "minio",
      "storage",
      "hostkit",
      "dev",
      "storage",
      "vector",
      "rag",
      "mail",
      "secrets",
      "vault",
      "every",
      "project",
      "gets",
      "project",
      "hostkit",
      "dev",
      "automatically",
      "with",
      "ssl"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "central-oauth-proxy-auth-hostkit-dev-23",
    "title": "Central OAuth Proxy (`auth.hostkit.dev`)",
    "content": "All OAuth authentication flows through a central proxy at `https://auth.hostkit.dev`. This allows a **single callback URL** to be registered with Google/Apple, instead of per-project callbacks.\n\n**Why a proxy?**\n- Google/Apple OAuth requires pre-registered callback URLs\n- Adding each new project to OAuth console is manual and slow\n- Central proxy handles OAuth, signs identity, redirects to project\n\n**OAuth Flow (Web):**\n\n```\n┌─────────────┐    ┌─────────────────────┐    ┌────────────┐    ┌─────────────┐\n│   Frontend  │───>│  auth.hostkit.dev   │───>│   Google   │───>│   Project   │\n│             │    │  /oauth/google/start│    │            │    │  Auth Svc   │\n└─────────────┘    └─────────────────────┘    └────────────┘    └─────────────┘\n      │                     │                       │                  │\n      │ 1. Redirect         │                       │                  │\n      │─────────────────────>                       │                  │\n      │    ?project=myapp                           │                  │\n      │    &return_url=https://myapp.hostkit.dev/   │                  │\n      │     auth/callback                           │                  │\n      │                     │                       │                  │\n      │                     │ 2. Redirect to Google │                  │\n      │                     │───────────────────────>                  │\n      │                     │                       │                  │\n      │                     │ 3. User authenticates │                  │\n      │                     │<───────────────────────                  │\n      │                     │    ?code=xxx          │                  │\n      │                     │                       │                  │\n      │                     │ 4. Validate token,    │                  │\n      │                     │    create signed      │                  │\n      │ 5. Redirect         │    identity           │                  │\n      │<─────────────────────                       │                  │\n      │  ?identity={token}  │                       │                  │\n      │                     │                       │                  │\n      │ 6. POST /auth/identity/verify              │                  │\n      │───────────────────────────────────────────────────────────────>\n      │    {\"token\": identity_token}               │                  │\n      │                     │                       │                  │\n      │ 7. Session tokens   │                       │                  │\n      │<───────────────────────────────────────────────────────────────\n```\n\n**Step-by-step:**\n\n1. **Frontend redirects to proxy:**\n   ```\n   https://auth.hostkit.dev/oauth/google/start\n     ?project=myapp\n     &return_url=https://myapp.hostkit.dev/auth/callback\n     &state=optional_client_state\n   ```\n\n2. **Proxy redirects to Google** with central callback URL\n\n3. **User authenticates with Google**",
    "section": "Architecture",
    "chunkType": "service",
    "tokens": [
      "central",
      "oauth",
      "proxy",
      "auth",
      "hostkit",
      "dev",
      "all",
      "oauth",
      "authentication",
      "flows",
      "through",
      "central",
      "proxy",
      "https",
      "auth",
      "hostkit",
      "dev",
      "this",
      "allows",
      "single",
      "callback",
      "url",
      "registered",
      "with",
      "google",
      "apple",
      "instead",
      "per",
      "project",
      "callbacks",
      "why",
      "proxy",
      "google",
      "apple",
      "oauth",
      "requires",
      "pre",
      "registered",
      "callback",
      "urls",
      "adding",
      "each",
      "new",
      "project",
      "oauth",
      "console",
      "manual",
      "and",
      "slow",
      "central",
      "proxy",
      "handles",
      "oauth",
      "signs",
      "identity",
      "redirects",
      "project",
      "oauth",
      "flow",
      "web",
      "frontend",
      "auth",
      "hostkit",
      "dev",
      "google",
      "project",
      "oauth",
      "google",
      "start",
      "auth",
      "svc",
      "redirect",
      "project",
      "myapp",
      "return",
      "url",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "auth",
      "callback",
      "redirect",
      "google",
      "user",
      "authenticates",
      "code",
      "xxx",
      "validate",
      "token",
      "create",
      "signed",
      "redirect",
      "identity",
      "identity",
      "token",
      "post",
      "auth",
      "identity",
      "verify",
      "token",
      "identity",
      "token",
      "session",
      "tokens",
      "step",
      "step",
      "frontend",
      "redirects",
      "proxy",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "start",
      "project",
      "myapp",
      "return",
      "url",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "auth",
      "callback",
      "state",
      "optional",
      "client",
      "state",
      "proxy",
      "redirects",
      "google",
      "with",
      "central",
      "callback",
      "url",
      "user",
      "authenticates",
      "with",
      "google"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "central-oauth-proxy-auth-hostkit-dev-24",
    "title": "Central OAuth Proxy (`auth.hostkit.dev`)",
    "content": "4. **Google redirects to proxy callback:**\n   ```\n   https://auth.hostkit.dev/oauth/google/callback?code=xxx&state=yyy\n   ```\n\n5. **Proxy validates Google token, creates signed identity payload, redirects to project:**\n   ```\n   https://myapp.hostkit.dev/auth/callback?identity={signed_token}&state=client_state\n   ```\n\n6. **Frontend extracts identity token and calls project auth service:**\n   ```javascript\n   // Frontend code\n   const params = new URLSearchParams(window.location.search);\n   const identityToken = params.get('identity');\n\n   const response = await fetch('/auth/identity/verify', {\n     method: 'POST',\n     headers: { 'Content-Type': 'application/json' },\n     body: JSON.stringify({ token: identityToken })\n   });\n\n   const { user, session } = await response.json();\n   // session contains access_token and refresh_token\n   ```\n\n7. **Project auth service verifies signature, creates/links user, returns session tokens**\n\n**Callback URLs (registered with Google/Apple):**\n- Google: `https://auth.hostkit.dev/oauth/google/callback`\n- Apple: `https://auth.hostkit.dev/oauth/apple/callback`\n\n**Proxy Endpoints:**\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| `/oauth/google/start` | GET | Initiate Google OAuth |\n| `/oauth/google/callback` | GET | Google callback (internal) |\n| `/oauth/apple/start` | GET | Initiate Apple Sign-In |\n| `/oauth/apple/callback` | POST | Apple callback (internal) |\n| `/keys/public` | GET | Get proxy's public key for verification |\n\n**Project Auth Endpoints:**\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| `/auth/identity/verify` | POST | Verify identity token, get session |\n| `/auth/oauth/google` | POST | Direct OAuth (not via proxy) |\n| `/auth/oauth/google/verify-token` | POST | Verify native app ID token |\n\n**Native App OAuth (iOS/Android):**\n\nNative apps can bypass the proxy and use direct token verification:\n\n```\n1. App uses Google Sign-In SDK to get ID token\n2. POST /auth/oauth/google/verify-token\n   {\"id_token\": \"...\", \"ios_client_id\": \"...\"}\n3. Auth service validates directly with Google\n4. Returns session tokens\n```\n\n**When to use proxy vs direct:**\n| Scenario | Use |\n|----------|-----|\n| Web OAuth (browser redirects) | Proxy (`auth.hostkit.dev`) |\n| Native iOS/Android apps | Direct (`/auth/oauth/google/verify-token`) |\n| Server-to-server | Direct with API key |\n\n---",
    "section": "Architecture",
    "chunkType": "service",
    "tokens": [
      "central",
      "oauth",
      "proxy",
      "auth",
      "hostkit",
      "dev",
      "google",
      "redirects",
      "proxy",
      "callback",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "callback",
      "code",
      "xxx",
      "state",
      "yyy",
      "proxy",
      "validates",
      "google",
      "token",
      "creates",
      "signed",
      "identity",
      "payload",
      "redirects",
      "project",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "auth",
      "callback",
      "identity",
      "signed",
      "token",
      "state",
      "client",
      "state",
      "frontend",
      "extracts",
      "identity",
      "token",
      "and",
      "calls",
      "project",
      "auth",
      "service",
      "javascript",
      "frontend",
      "code",
      "const",
      "params",
      "new",
      "urlsearchparams",
      "window",
      "location",
      "search",
      "const",
      "identitytoken",
      "params",
      "get",
      "identity",
      "const",
      "response",
      "await",
      "fetch",
      "auth",
      "identity",
      "verify",
      "method",
      "post",
      "headers",
      "content",
      "type",
      "application",
      "json",
      "body",
      "json",
      "stringify",
      "token",
      "identitytoken",
      "const",
      "user",
      "session",
      "await",
      "response",
      "json",
      "session",
      "contains",
      "access",
      "token",
      "and",
      "refresh",
      "token",
      "project",
      "auth",
      "service",
      "verifies",
      "signature",
      "creates",
      "links",
      "user",
      "returns",
      "session",
      "tokens",
      "callback",
      "urls",
      "registered",
      "with",
      "google",
      "apple",
      "google",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "callback",
      "apple",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "apple",
      "callback",
      "proxy",
      "endpoints",
      "endpoint",
      "method",
      "description",
      "oauth",
      "google",
      "start",
      "get",
      "initiate",
      "google",
      "oauth",
      "oauth",
      "google",
      "callback",
      "get",
      "google",
      "callback",
      "internal",
      "oauth",
      "apple",
      "start",
      "get",
      "initiate",
      "apple",
      "sign",
      "oauth",
      "apple",
      "callback",
      "post",
      "apple",
      "callback",
      "internal",
      "keys",
      "public",
      "get",
      "get",
      "proxy",
      "public",
      "key",
      "for",
      "verification",
      "project",
      "auth",
      "endpoints",
      "endpoint",
      "method",
      "description",
      "auth",
      "identity",
      "verify",
      "post",
      "verify",
      "identity",
      "token",
      "get",
      "session",
      "auth",
      "oauth",
      "google",
      "post",
      "direct",
      "oauth",
      "not",
      "via",
      "proxy",
      "auth",
      "oauth",
      "google",
      "verify",
      "token",
      "post",
      "verify",
      "native",
      "app",
      "token",
      "native",
      "app",
      "oauth",
      "ios",
      "android",
      "native",
      "apps",
      "can",
      "bypass",
      "the",
      "proxy",
      "and",
      "use",
      "direct",
      "token",
      "verification",
      "app",
      "uses",
      "google",
      "sign",
      "sdk",
      "get",
      "token",
      "post",
      "auth",
      "oauth",
      "google",
      "verify",
      "token",
      "token",
      "ios",
      "client",
      "auth",
      "service",
      "validates",
      "directly",
      "with",
      "google",
      "returns",
      "session",
      "tokens",
      "when",
      "use",
      "proxy",
      "direct",
      "scenario",
      "use",
      "web",
      "oauth",
      "browser",
      "redirects",
      "proxy",
      "auth",
      "hostkit",
      "dev",
      "native",
      "ios",
      "android",
      "apps",
      "direct",
      "auth",
      "oauth",
      "google",
      "verify",
      "token",
      "server",
      "server",
      "direct",
      "with",
      "api",
      "key"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "critical-auth-integration-fixes-25",
    "title": "CRITICAL: Auth Integration Fixes",
    "content": "> **STOP! Before implementing authentication, call `hostkit_auth_guide` with your project name.**\n> These issues will cause silent failures if not addressed.",
    "section": "CRITICAL: Auth Integration Fixes",
    "chunkType": "service",
    "tokens": [
      "critical",
      "auth",
      "integration",
      "fixes",
      "stop",
      "before",
      "implementing",
      "authentication",
      "call",
      "hostkit",
      "auth",
      "guide",
      "with",
      "your",
      "project",
      "name",
      "these",
      "issues",
      "will",
      "cause",
      "silent",
      "failures",
      "not",
      "addressed"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "issue-1-jwt-public-key-newline-encoding-high-sever-26",
    "title": "Issue #1: JWT Public Key Newline Encoding (HIGH SEVERITY)",
    "content": "**Problem:** `AUTH_JWT_PUBLIC_KEY` contains literal `\\n` strings instead of real newlines.\n\n**Symptom:** JWT verification fails with \"Invalid character\" error. Users complete auth but get redirected back to login with no error message.\n\n**REQUIRED FIX:**\n```javascript\n// JavaScript/TypeScript\nconst JWT_PUBLIC_KEY = (process.env.AUTH_JWT_PUBLIC_KEY || \"\").replace(/\\\\n/g, \"\\n\");\n```\n\n```python\n# Python\nJWT_PUBLIC_KEY = os.environ.get(\"AUTH_JWT_PUBLIC_KEY\", \"\").replace(\"\\\\n\", \"\\n\")\n```",
    "section": "CRITICAL: Auth Integration Fixes",
    "chunkType": "example",
    "tokens": [
      "issue",
      "jwt",
      "public",
      "key",
      "newline",
      "encoding",
      "high",
      "severity",
      "problem",
      "auth",
      "jwt",
      "public",
      "key",
      "contains",
      "literal",
      "strings",
      "instead",
      "real",
      "newlines",
      "symptom",
      "jwt",
      "verification",
      "fails",
      "with",
      "invalid",
      "character",
      "error",
      "users",
      "complete",
      "auth",
      "but",
      "get",
      "redirected",
      "back",
      "login",
      "with",
      "error",
      "message",
      "required",
      "fix",
      "javascript",
      "javascript",
      "typescript",
      "const",
      "jwt",
      "public",
      "key",
      "process",
      "env",
      "auth",
      "jwt",
      "public",
      "key",
      "replace",
      "python",
      "python",
      "jwt",
      "public",
      "key",
      "environ",
      "get",
      "auth",
      "jwt",
      "public",
      "key",
      "replace"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "issue-2-oauth-identity-verify-response-structure-h-27",
    "title": "Issue #2: OAuth Identity Verify Response Structure (HIGH SEVERITY)",
    "content": "**Problem:** `/auth/identity/verify` returns tokens **nested under `session`**, not at top level.\n\n**Symptom:** OAuth flow completes but session creation fails because `access_token` is undefined.\n\n**Actual response structure:**\n```json\n{\n  \"user\": { \"id\": \"...\", \"email\": \"...\" },\n  \"session\": {\n    \"access_token\": \"eyJ...\",\n    \"refresh_token\": \"eyJ...\",\n    \"token_type\": \"bearer\",\n    \"expires_in\": 3600\n  },\n  \"is_new_user\": true\n}\n```\n\n**REQUIRED FIX:**\n```javascript\nconst data = await response.json();\nconst { access_token, refresh_token } = data.session || data;  // Handle both structures\n```",
    "section": "CRITICAL: Auth Integration Fixes",
    "chunkType": "service",
    "tokens": [
      "issue",
      "oauth",
      "identity",
      "verify",
      "response",
      "structure",
      "high",
      "severity",
      "problem",
      "auth",
      "identity",
      "verify",
      "returns",
      "tokens",
      "nested",
      "under",
      "session",
      "not",
      "top",
      "level",
      "symptom",
      "oauth",
      "flow",
      "completes",
      "but",
      "session",
      "creation",
      "fails",
      "because",
      "access",
      "token",
      "undefined",
      "actual",
      "response",
      "structure",
      "json",
      "user",
      "email",
      "session",
      "access",
      "token",
      "eyj",
      "refresh",
      "token",
      "eyj",
      "token",
      "type",
      "bearer",
      "expires",
      "3600",
      "new",
      "user",
      "true",
      "required",
      "fix",
      "javascript",
      "const",
      "data",
      "await",
      "response",
      "json",
      "const",
      "access",
      "token",
      "refresh",
      "token",
      "data",
      "session",
      "data",
      "handle",
      "both",
      "structures"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "issue-3-apple-sign-in-chrome-incompatibility-mediu-28",
    "title": "Issue #3: Apple Sign In Chrome Incompatibility (MEDIUM SEVERITY)",
    "content": "**Problem:** Apple Sign In does NOT work in Chrome browsers (Apple policy restriction).\n\n**Symptom:** Apple Sign In button causes error or redirect loop in Chrome.\n\n**REQUIRED FIX:**\n```javascript\n// Detect Chrome and hide Apple Sign In\nconst userAgent = navigator.userAgent.toLowerCase();\nconst isChrome = userAgent.includes(\"chrome\") && !userAgent.includes(\"edg\") && !userAgent.includes(\"opr\");\nif (isChrome) {\n  // Hide Apple Sign In button\n}\n```",
    "section": "CRITICAL: Auth Integration Fixes",
    "chunkType": "example",
    "tokens": [
      "issue",
      "apple",
      "sign",
      "chrome",
      "incompatibility",
      "medium",
      "severity",
      "problem",
      "apple",
      "sign",
      "does",
      "not",
      "work",
      "chrome",
      "browsers",
      "apple",
      "policy",
      "restriction",
      "symptom",
      "apple",
      "sign",
      "button",
      "causes",
      "error",
      "redirect",
      "loop",
      "chrome",
      "required",
      "fix",
      "javascript",
      "detect",
      "chrome",
      "and",
      "hide",
      "apple",
      "sign",
      "const",
      "useragent",
      "navigator",
      "useragent",
      "tolowercase",
      "const",
      "ischrome",
      "useragent",
      "includes",
      "chrome",
      "useragent",
      "includes",
      "edg",
      "useragent",
      "includes",
      "opr",
      "ischrome",
      "hide",
      "apple",
      "sign",
      "button"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "issue-4-token-delivery-differences-29",
    "title": "Issue #4: Token Delivery Differences",
    "content": "**Magic Link:** Tokens delivered in URL **fragment** (hash):\n```\nhttps://myapp.hostkit.dev/auth/callback#access_token=...&refresh_token=...\n```\n\n**OAuth:** Tokens delivered via **API response** (nested under `session`):\n```javascript\nconst response = await fetch('/auth/identity/verify', { ... });\nconst { session } = await response.json();\nconst { access_token, refresh_token } = session;\n```\n\nYour callback handler must support BOTH patterns.",
    "section": "CRITICAL: Auth Integration Fixes",
    "chunkType": "example",
    "tokens": [
      "issue",
      "token",
      "delivery",
      "differences",
      "magic",
      "link",
      "tokens",
      "delivered",
      "url",
      "fragment",
      "hash",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "auth",
      "callback",
      "access",
      "token",
      "refresh",
      "token",
      "oauth",
      "tokens",
      "delivered",
      "via",
      "api",
      "response",
      "nested",
      "under",
      "session",
      "javascript",
      "const",
      "response",
      "await",
      "fetch",
      "auth",
      "identity",
      "verify",
      "const",
      "session",
      "await",
      "response",
      "json",
      "const",
      "access",
      "token",
      "refresh",
      "token",
      "session",
      "your",
      "callback",
      "handler",
      "must",
      "support",
      "both",
      "patterns"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "quick-checklist-30",
    "title": "Quick Checklist",
    "content": "- [ ] Applied newline fix to `AUTH_JWT_PUBLIC_KEY`\n- [ ] Extracting tokens from `data.session` (not top level)\n- [ ] Hiding Apple Sign In in Chrome browsers\n- [ ] Handling tokens in URL fragment (magic link) AND API response (OAuth)\n- [ ] Called `hostkit_auth_guide` for complete code examples\n\n---",
    "section": "CRITICAL: Auth Integration Fixes",
    "chunkType": "example",
    "tokens": [
      "quick",
      "checklist",
      "applied",
      "newline",
      "fix",
      "auth",
      "jwt",
      "public",
      "key",
      "extracting",
      "tokens",
      "from",
      "data",
      "session",
      "not",
      "top",
      "level",
      "hiding",
      "apple",
      "sign",
      "chrome",
      "browsers",
      "handling",
      "tokens",
      "url",
      "fragment",
      "magic",
      "link",
      "and",
      "api",
      "response",
      "oauth",
      "called",
      "hostkit",
      "auth",
      "guide",
      "for",
      "complete",
      "code",
      "examples"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "minio-object-storage-31",
    "title": "MinIO Object Storage",
    "content": "S3-compatible object storage at `https://s3.hostkit.dev` with per-project buckets.\n\n**Enable for a project:**\n```\nhostkit minio enable myapp              # Private bucket\nhostkit minio enable myapp --public     # Public-read bucket\n```\n\n**What you get:**\n- Bucket: `hostkit-{project}` (e.g., `hostkit-myapp`)\n- Isolated credentials (access key + secret key)\n- Public URL: `https://s3.hostkit.dev/hostkit-{project}/`\n- Env vars auto-set: `S3_ENDPOINT`, `S3_BUCKET`, `S3_ACCESS_KEY`, `S3_SECRET_KEY`, `S3_PUBLIC_URL`\n\n**Public vs Private:**\n| Mode | GET | PUT/DELETE | Use case |\n|------|-----|------------|----------|\n| Private | Presigned URLs | Credentials | User uploads, sensitive files |\n| Public | Direct URL | Credentials | Static assets, images, public media |\n\n**Commands:**\n```\nhostkit minio enable myapp              # Enable storage\nhostkit minio enable myapp --public     # Enable with public access\nhostkit minio disable myapp --force     # Disable and delete bucket\nhostkit minio status                    # Show MinIO status\nhostkit minio list                      # List all buckets\nhostkit minio credentials myapp         # View credentials\nhostkit minio policy myapp public-read  # Make bucket public\nhostkit minio policy myapp private      # Make bucket private\n```\n\n**Public file access:**\n```\nhttps://s3.hostkit.dev/hostkit-myapp/uploads/photo.jpg\n```\n\n**SDK usage (Python):**\n```python\nimport boto3\n\ns3 = boto3.client(\n    \"s3\",\n    endpoint_url=os.environ[\"S3_ENDPOINT\"],\n    aws_access_key_id=os.environ[\"S3_ACCESS_KEY\"],\n    aws_secret_access_key=os.environ[\"S3_SECRET_KEY\"],\n)\n\n# Upload\ns3.upload_file(\"local.jpg\", os.environ[\"S3_BUCKET\"], \"uploads/photo.jpg\")\n\n# Public URL (if bucket is public)\nurl = f\"{os.environ['S3_PUBLIC_URL']}/uploads/photo.jpg\"\n```",
    "section": "CRITICAL: Auth Integration Fixes",
    "chunkType": "command",
    "tokens": [
      "minio",
      "object",
      "storage",
      "compatible",
      "object",
      "storage",
      "https",
      "hostkit",
      "dev",
      "with",
      "per",
      "project",
      "buckets",
      "enable",
      "for",
      "project",
      "hostkit",
      "minio",
      "enable",
      "myapp",
      "private",
      "bucket",
      "hostkit",
      "minio",
      "enable",
      "myapp",
      "public",
      "public",
      "read",
      "bucket",
      "what",
      "you",
      "get",
      "bucket",
      "hostkit",
      "project",
      "hostkit",
      "myapp",
      "isolated",
      "credentials",
      "access",
      "key",
      "secret",
      "key",
      "public",
      "url",
      "https",
      "hostkit",
      "dev",
      "hostkit",
      "project",
      "env",
      "vars",
      "auto",
      "set",
      "endpoint",
      "bucket",
      "access",
      "key",
      "secret",
      "key",
      "public",
      "url",
      "public",
      "private",
      "mode",
      "get",
      "put",
      "delete",
      "use",
      "case",
      "private",
      "presigned",
      "urls",
      "credentials",
      "user",
      "uploads",
      "sensitive",
      "files",
      "public",
      "direct",
      "url",
      "credentials",
      "static",
      "assets",
      "images",
      "public",
      "media",
      "commands",
      "hostkit",
      "minio",
      "enable",
      "myapp",
      "enable",
      "storage",
      "hostkit",
      "minio",
      "enable",
      "myapp",
      "public",
      "enable",
      "with",
      "public",
      "access",
      "hostkit",
      "minio",
      "disable",
      "myapp",
      "force",
      "disable",
      "and",
      "delete",
      "bucket",
      "hostkit",
      "minio",
      "status",
      "show",
      "minio",
      "status",
      "hostkit",
      "minio",
      "list",
      "list",
      "all",
      "buckets",
      "hostkit",
      "minio",
      "credentials",
      "myapp",
      "view",
      "credentials",
      "hostkit",
      "minio",
      "policy",
      "myapp",
      "public",
      "read",
      "make",
      "bucket",
      "public",
      "hostkit",
      "minio",
      "policy",
      "myapp",
      "private",
      "make",
      "bucket",
      "private",
      "public",
      "file",
      "access",
      "https",
      "hostkit",
      "dev",
      "hostkit",
      "myapp",
      "uploads",
      "photo",
      "jpg",
      "sdk",
      "usage",
      "python",
      "python",
      "import",
      "boto3",
      "boto3",
      "client",
      "endpoint",
      "url",
      "environ",
      "endpoint",
      "aws",
      "access",
      "key",
      "environ",
      "access",
      "key",
      "aws",
      "secret",
      "access",
      "key",
      "environ",
      "secret",
      "key",
      "upload",
      "upload",
      "file",
      "local",
      "jpg",
      "environ",
      "bucket",
      "uploads",
      "photo",
      "jpg",
      "public",
      "url",
      "bucket",
      "public",
      "url",
      "environ",
      "public",
      "url",
      "uploads",
      "photo",
      "jpg"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "directory-layout-32",
    "title": "Directory Layout",
    "content": "```\n/home/{project}/\n├── releases/           # Timestamped deploys\n├── app -> releases/x/  # Current release symlink\n├── shared/             # Persistent data\n├── .env                # Environment\n├── .auth/              # Auth service (if enabled)\n├── .payments/          # Payments service (if enabled)\n└── venv/ or node_modules/\n```\n\n---",
    "section": "CRITICAL: Auth Integration Fixes",
    "chunkType": "example",
    "tokens": [
      "directory",
      "layout",
      "home",
      "project",
      "releases",
      "timestamped",
      "deploys",
      "app",
      "releases",
      "current",
      "release",
      "symlink",
      "shared",
      "persistent",
      "data",
      "env",
      "environment",
      "auth",
      "auth",
      "service",
      "enabled",
      "payments",
      "payments",
      "service",
      "enabled",
      "venv",
      "node",
      "modules"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "recording-solutions-33",
    "title": "Recording Solutions",
    "content": "**Search before debugging:**\n```\nhostkit_solutions: action=\"search\", query=\"jwt token expired auth\"\n```\n\n**Record after solving:**\n```\nhostkit_solutions:\n  action: \"record\"\n  problem: \"Auth service returns 401 with 'token expired' even for fresh tokens\"\n  solution: \"Clock drift between VPS and auth service. Fixed with: timedatectl set-ntp true\"\n  project: \"myapp\"\n  tags: [\"auth\", \"jwt\", \"ntp\", \"clock\"]\n```\n\n**Good problem descriptions:**\n- Include the error message verbatim\n- Note what you were trying to do\n- Mention the service/context\n\n**Good solutions:**\n- Exact commands or code changes\n- Why it works, not just what you did\n- Alternative approaches if relevant\n\n---",
    "section": "Recording Solutions",
    "chunkType": "example",
    "tokens": [
      "recording",
      "solutions",
      "search",
      "before",
      "debugging",
      "hostkit",
      "solutions",
      "action",
      "search",
      "query",
      "jwt",
      "token",
      "expired",
      "auth",
      "record",
      "after",
      "solving",
      "hostkit",
      "solutions",
      "action",
      "record",
      "problem",
      "auth",
      "service",
      "returns",
      "401",
      "with",
      "token",
      "expired",
      "even",
      "for",
      "fresh",
      "tokens",
      "solution",
      "clock",
      "drift",
      "between",
      "vps",
      "and",
      "auth",
      "service",
      "fixed",
      "with",
      "timedatectl",
      "set",
      "ntp",
      "true",
      "project",
      "myapp",
      "tags",
      "auth",
      "jwt",
      "ntp",
      "clock",
      "good",
      "problem",
      "descriptions",
      "include",
      "the",
      "error",
      "message",
      "verbatim",
      "note",
      "what",
      "you",
      "were",
      "trying",
      "mention",
      "the",
      "service",
      "context",
      "good",
      "solutions",
      "exact",
      "commands",
      "code",
      "changes",
      "why",
      "works",
      "not",
      "just",
      "what",
      "you",
      "did",
      "alternative",
      "approaches",
      "relevant"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "what-s-searchable-34",
    "title": "What's Searchable",
    "content": "The search index contains comprehensive documentation for:\n\n**Services:** auth, payments, sms, voice, booking, chatbot, minio, r2, vector, mail, backup, nginx, ssl\n\n**Commands:** Full CLI reference with examples\n\n**Concepts:** Architecture, security, deployment patterns\n\n**Examples:** Common workflows, integrations, troubleshooting\n\nQuery with `hostkit_search`. The hybrid search uses semantic understanding (70%) and keyword matching (30%) for accurate results.\n\n---",
    "section": "What's Searchable",
    "chunkType": "example",
    "tokens": [
      "what",
      "searchable",
      "the",
      "search",
      "index",
      "contains",
      "comprehensive",
      "documentation",
      "for",
      "services",
      "auth",
      "payments",
      "sms",
      "voice",
      "booking",
      "chatbot",
      "minio",
      "vector",
      "mail",
      "backup",
      "nginx",
      "ssl",
      "commands",
      "full",
      "cli",
      "reference",
      "with",
      "examples",
      "concepts",
      "architecture",
      "security",
      "deployment",
      "patterns",
      "examples",
      "common",
      "workflows",
      "integrations",
      "troubleshooting",
      "query",
      "with",
      "hostkit",
      "search",
      "the",
      "hybrid",
      "search",
      "uses",
      "semantic",
      "understanding",
      "and",
      "keyword",
      "matching",
      "for",
      "accurate",
      "results"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "the-correct-deployment-flow-35",
    "title": "The Correct Deployment Flow",
    "content": "```\n1. Build locally:     cd /path/to/project && npm run build\n2. Deploy:            hostkit_deploy_local with install=true, build=true, wait_healthy=true\n3. Verify:            Use Playwright to load the actual site — health checks are NOT enough\n```",
    "section": "CRITICAL: Next.js Deployment Rules",
    "chunkType": "example",
    "tokens": [
      "the",
      "correct",
      "deployment",
      "flow",
      "build",
      "locally",
      "path",
      "project",
      "npm",
      "run",
      "build",
      "deploy",
      "hostkit",
      "deploy",
      "local",
      "with",
      "install",
      "true",
      "build",
      "true",
      "wait",
      "healthy",
      "true",
      "verify",
      "use",
      "playwright",
      "load",
      "the",
      "actual",
      "site",
      "health",
      "checks",
      "are",
      "not",
      "enough"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "mandatory-flags-36",
    "title": "Mandatory Flags",
    "content": "When calling `hostkit_deploy_local` for ANY Node/Next.js project:\n\n```\nhostkit_deploy_local:\n  project: \"my-project\"\n  local_path: \"/path/to/project\"\n  install: true       # MANDATORY — skipping causes \"module not found\" crash loops\n  build: true         # MANDATORY — skipping serves stale/missing builds\n  wait_healthy: true  # MANDATORY — confirms service starts\n```\n\n**Never omit `install` or `build`.** There is no valid reason to skip them.",
    "section": "CRITICAL: Next.js Deployment Rules",
    "chunkType": "example",
    "tokens": [
      "mandatory",
      "flags",
      "when",
      "calling",
      "hostkit",
      "deploy",
      "local",
      "for",
      "any",
      "node",
      "next",
      "project",
      "hostkit",
      "deploy",
      "local",
      "project",
      "project",
      "local",
      "path",
      "path",
      "project",
      "install",
      "true",
      "mandatory",
      "skipping",
      "causes",
      "module",
      "not",
      "found",
      "crash",
      "loops",
      "build",
      "true",
      "mandatory",
      "skipping",
      "serves",
      "stale",
      "missing",
      "builds",
      "wait",
      "healthy",
      "true",
      "mandatory",
      "confirms",
      "service",
      "starts",
      "never",
      "omit",
      "install",
      "build",
      "there",
      "valid",
      "reason",
      "skip",
      "them"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "next-js-requirements-37",
    "title": "Next.js Requirements",
    "content": "- Project MUST be created with `--nextjs` runtime. Runtime is immutable — wrong runtime means delete and recreate.\n- `next.config.js` MUST include `output: \"standalone\"` for HostKit deployment.\n- Project names: lowercase, hyphens only. No underscores, no uppercase.",
    "section": "CRITICAL: Next.js Deployment Rules",
    "chunkType": "command",
    "tokens": [
      "next",
      "requirements",
      "project",
      "must",
      "created",
      "with",
      "nextjs",
      "runtime",
      "runtime",
      "immutable",
      "wrong",
      "runtime",
      "means",
      "delete",
      "and",
      "recreate",
      "next",
      "config",
      "must",
      "include",
      "output",
      "standalone",
      "for",
      "hostkit",
      "deployment",
      "project",
      "names",
      "lowercase",
      "hyphens",
      "only",
      "underscores",
      "uppercase"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "large-projects-rsync-timeout-38",
    "title": "Large Projects (rsync timeout)",
    "content": "If `hostkit_deploy_local` times out, deploy manually:\n\n```bash\nrsync -avz --delete \\\n  --exclude=node_modules --exclude=.git --exclude=.next \\\n  /local/project/ ai-operator@145.223.74.213:/tmp/project-deploy/\n```\n\nThen: `hostkit_execute: command=\"deploy project --source /tmp/project-deploy --install --build\"`\n\n**IMPORTANT:** Use anchored rsync excludes (`--exclude=/images`) to avoid matching subdirectories at any depth.",
    "section": "CRITICAL: Next.js Deployment Rules",
    "chunkType": "command",
    "tokens": [
      "large",
      "projects",
      "rsync",
      "timeout",
      "hostkit",
      "deploy",
      "local",
      "times",
      "out",
      "deploy",
      "manually",
      "bash",
      "rsync",
      "avz",
      "delete",
      "exclude",
      "node",
      "modules",
      "exclude",
      "git",
      "exclude",
      "next",
      "local",
      "project",
      "operator",
      "145",
      "223",
      "213",
      "tmp",
      "project",
      "deploy",
      "then",
      "hostkit",
      "execute",
      "command",
      "deploy",
      "project",
      "source",
      "tmp",
      "project",
      "deploy",
      "install",
      "build",
      "important",
      "use",
      "anchored",
      "rsync",
      "excludes",
      "exclude",
      "images",
      "avoid",
      "matching",
      "subdirectories",
      "any",
      "depth"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "post-deploy-verification-39",
    "title": "Post-Deploy Verification",
    "content": "Health checks pass even with broken assets, missing CSS, or 500 errors on actual pages. After every deploy:\n\n1. Use Playwright to navigate to the actual site URL\n2. Take a snapshot and verify content renders\n3. Check `browser_console_messages` for JavaScript errors\n4. If behind Cloudflare, bust cache with `?v={timestamp}`",
    "section": "CRITICAL: Next.js Deployment Rules",
    "chunkType": "concept",
    "tokens": [
      "post",
      "deploy",
      "verification",
      "health",
      "checks",
      "pass",
      "even",
      "with",
      "broken",
      "assets",
      "missing",
      "css",
      "500",
      "errors",
      "actual",
      "pages",
      "after",
      "every",
      "deploy",
      "use",
      "playwright",
      "navigate",
      "the",
      "actual",
      "site",
      "url",
      "take",
      "snapshot",
      "and",
      "verify",
      "content",
      "renders",
      "check",
      "browser",
      "console",
      "messages",
      "for",
      "javascript",
      "errors",
      "behind",
      "cloudflare",
      "bust",
      "cache",
      "with",
      "timestamp"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "common-crash-loop-causes-40",
    "title": "Common Crash Loop Causes",
    "content": "| Symptom | Cause | Fix |\n|---------|-------|-----|\n| Rapid restarts | Missing `install: true` | Redeploy with all flags |\n| \"Module not found\" | Missing `install: true` | Redeploy with all flags |\n| Stale content | Missing `build: true` | Redeploy with all flags |\n| \"next: command not found\" | Wrong runtime | Delete project, recreate with `--nextjs` |\n\n---",
    "section": "CRITICAL: Next.js Deployment Rules",
    "chunkType": "concept",
    "tokens": [
      "common",
      "crash",
      "loop",
      "causes",
      "symptom",
      "cause",
      "fix",
      "rapid",
      "restarts",
      "missing",
      "install",
      "true",
      "redeploy",
      "with",
      "all",
      "flags",
      "module",
      "not",
      "found",
      "missing",
      "install",
      "true",
      "redeploy",
      "with",
      "all",
      "flags",
      "stale",
      "content",
      "missing",
      "build",
      "true",
      "redeploy",
      "with",
      "all",
      "flags",
      "next",
      "command",
      "not",
      "found",
      "wrong",
      "runtime",
      "delete",
      "project",
      "recreate",
      "with",
      "nextjs"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "common-operations-41",
    "title": "Common Operations",
    "content": "| Task | Command |\n|------|---------|\n| Create project | `project create myapp --python --with-db` |\n| Deploy | `deploy myapp --install` |\n| Rollback | `rollback myapp` |\n| Health check | `health myapp` |\n| View logs | `service logs myapp` |\n| Diagnose failures | `diagnose myapp` |\n| Test startup | `diagnose myapp --run-test` |\n| Enable service | `{service} enable myapp` |\n| Enable storage | `minio enable myapp --public` |\n| Backup | `backup create myapp --r2` |\n| Add domain | `nginx add myapp example.com` |\n| Disable rate limit | `ratelimit disable myapp` |\n| Enable rate limit | `ratelimit enable myapp` |\n| Show rate limit | `ratelimit show myapp` |",
    "section": "Quick Reference",
    "chunkType": "example",
    "tokens": [
      "common",
      "operations",
      "task",
      "command",
      "create",
      "project",
      "project",
      "create",
      "myapp",
      "python",
      "with",
      "deploy",
      "deploy",
      "myapp",
      "install",
      "rollback",
      "rollback",
      "myapp",
      "health",
      "check",
      "health",
      "myapp",
      "view",
      "logs",
      "service",
      "logs",
      "myapp",
      "diagnose",
      "failures",
      "diagnose",
      "myapp",
      "test",
      "startup",
      "diagnose",
      "myapp",
      "run",
      "test",
      "enable",
      "service",
      "service",
      "enable",
      "myapp",
      "enable",
      "storage",
      "minio",
      "enable",
      "myapp",
      "public",
      "backup",
      "backup",
      "create",
      "myapp",
      "add",
      "domain",
      "nginx",
      "add",
      "myapp",
      "example",
      "com",
      "disable",
      "rate",
      "limit",
      "ratelimit",
      "disable",
      "myapp",
      "enable",
      "rate",
      "limit",
      "ratelimit",
      "enable",
      "myapp",
      "show",
      "rate",
      "limit",
      "ratelimit",
      "show",
      "myapp"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "service-ports-from-project-base-port-42",
    "title": "Service Ports (from project base port)",
    "content": "| Service | Offset | Example (base 8001) |\n|---------|--------|---------------------|\n| Auth | +1000 | 9001 |\n| Payments | +2000 | 10001 |\n| SMS | +3000 | 11001 |\n| Booking | +4000 | 12001 |\n| Chatbot | +5000 | 13001 |",
    "section": "Quick Reference",
    "chunkType": "service",
    "tokens": [
      "service",
      "ports",
      "from",
      "project",
      "base",
      "port",
      "service",
      "offset",
      "example",
      "base",
      "8001",
      "auth",
      "1000",
      "9001",
      "payments",
      "2000",
      "10001",
      "sms",
      "3000",
      "11001",
      "booking",
      "4000",
      "12001",
      "chatbot",
      "5000",
      "13001"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "runtimes-43",
    "title": "Runtimes",
    "content": "| Flag | Start Command |\n|------|---------------|\n| `--python` | `venv/bin/python -m app` |\n| `--node` | `node app/index.js` |\n| `--nextjs` | `npm start` |\n| `--static` | Nginx serves directly |",
    "section": "Quick Reference",
    "chunkType": "concept",
    "tokens": [
      "runtimes",
      "flag",
      "start",
      "command",
      "python",
      "venv",
      "bin",
      "python",
      "app",
      "node",
      "node",
      "app",
      "index",
      "nextjs",
      "npm",
      "start",
      "static",
      "nginx",
      "serves",
      "directly"
    ],
    "source": "CLAUDE.md"
  },
  {
    "id": "overview-0",
    "title": "Overview",
    "content": "HostKit Auth provides JWT-based authentication with multiple identity providers.\n\n**Enable:**\n```\nhostkit_execute: command=\"auth enable myapp\"\n```\n\n**What you get:**\n- FastAPI auth service at port+1000\n- PostgreSQL database for users\n- JWT token issuance and validation\n- Email/password, magic link, and anonymous auth\n- Google and Apple OAuth (platform-configured)",
    "section": "Auth Service",
    "chunkType": "command",
    "tokens": [
      "overview",
      "hostkit",
      "auth",
      "provides",
      "jwt",
      "based",
      "authentication",
      "with",
      "multiple",
      "identity",
      "providers",
      "enable",
      "hostkit",
      "execute",
      "command",
      "auth",
      "enable",
      "myapp",
      "what",
      "you",
      "get",
      "fastapi",
      "auth",
      "service",
      "port",
      "1000",
      "postgresql",
      "database",
      "for",
      "users",
      "jwt",
      "token",
      "issuance",
      "and",
      "validation",
      "email",
      "password",
      "magic",
      "link",
      "and",
      "anonymous",
      "auth",
      "google",
      "and",
      "apple",
      "oauth",
      "platform",
      "configured"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "api-endpoints-1",
    "title": "API Endpoints",
    "content": "| Endpoint | Method | Purpose |\n|----------|--------|---------|\n| `/auth/health` | GET | Health check |\n| `/auth/register` | POST | Email/password registration |\n| `/auth/login` | POST | Email/password login |\n| `/auth/magic-link` | POST | Request magic link |\n| `/auth/magic-link/verify` | GET | Verify magic link |\n| `/auth/anonymous` | POST | Create anonymous session |\n| `/auth/refresh` | POST | Refresh access token |\n| `/auth/logout` | POST | Invalidate refresh token |\n| `/auth/me` | GET | Get current user |\n| `/auth/oauth/{provider}/callback` | POST | OAuth callback (web) |\n| `/auth/oauth/{provider}/verify-token` | POST | OAuth token verify (native) |",
    "section": "Auth Service",
    "chunkType": "concept",
    "tokens": [
      "api",
      "endpoints",
      "endpoint",
      "method",
      "purpose",
      "auth",
      "health",
      "get",
      "health",
      "check",
      "auth",
      "register",
      "post",
      "email",
      "password",
      "registration",
      "auth",
      "login",
      "post",
      "email",
      "password",
      "login",
      "auth",
      "magic",
      "link",
      "post",
      "request",
      "magic",
      "link",
      "auth",
      "magic",
      "link",
      "verify",
      "get",
      "verify",
      "magic",
      "link",
      "auth",
      "anonymous",
      "post",
      "create",
      "anonymous",
      "session",
      "auth",
      "refresh",
      "post",
      "refresh",
      "access",
      "token",
      "auth",
      "logout",
      "post",
      "invalidate",
      "refresh",
      "token",
      "auth",
      "get",
      "get",
      "current",
      "user",
      "auth",
      "oauth",
      "provider",
      "callback",
      "post",
      "oauth",
      "callback",
      "web",
      "auth",
      "oauth",
      "provider",
      "verify",
      "token",
      "post",
      "oauth",
      "token",
      "verify",
      "native"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "environment-variables-auto-set-2",
    "title": "Environment Variables (auto-set)",
    "content": "```\nAUTH_DATABASE_URL=postgresql://...\nAUTH_JWT_SECRET=<generated>\nAUTH_JWT_PUBLIC_KEY=<exported to project .env>\n```",
    "section": "Auth Service",
    "chunkType": "example",
    "tokens": [
      "environment",
      "variables",
      "auto",
      "set",
      "auth",
      "database",
      "url",
      "postgresql",
      "auth",
      "jwt",
      "secret",
      "generated",
      "auth",
      "jwt",
      "public",
      "key",
      "exported",
      "project",
      "env"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "oauth-configuration-3",
    "title": "OAuth Configuration",
    "content": "OAuth flows through a **central proxy** at `auth.hostkit.dev`. This allows a single callback URL to be registered with Google/Apple, rather than per-project callbacks.\n\n**To enable OAuth for your project:**\n```\nhostkit_execute: command=\"auth enable myapp\"\nhostkit_execute: command=\"auth config myapp --from-platform\"\n```\n\n**Central Callback URLs (registered with Google/Apple):**\n- Google: `https://auth.hostkit.dev/oauth/google/callback`\n- Apple: `https://auth.hostkit.dev/oauth/apple/callback`",
    "section": "Auth Service",
    "chunkType": "service",
    "tokens": [
      "oauth",
      "configuration",
      "oauth",
      "flows",
      "through",
      "central",
      "proxy",
      "auth",
      "hostkit",
      "dev",
      "this",
      "allows",
      "single",
      "callback",
      "url",
      "registered",
      "with",
      "google",
      "apple",
      "rather",
      "than",
      "per",
      "project",
      "callbacks",
      "enable",
      "oauth",
      "for",
      "your",
      "project",
      "hostkit",
      "execute",
      "command",
      "auth",
      "enable",
      "myapp",
      "hostkit",
      "execute",
      "command",
      "auth",
      "config",
      "myapp",
      "from",
      "platform",
      "central",
      "callback",
      "urls",
      "registered",
      "with",
      "google",
      "apple",
      "google",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "callback",
      "apple",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "apple",
      "callback"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "web-oauth-flow-via-central-proxy-4",
    "title": "Web OAuth Flow (via Central Proxy)",
    "content": "1. **Frontend redirects to proxy:**\n   ```\n   https://auth.hostkit.dev/oauth/google/start\n     ?project=myapp\n     &return_url=https://myapp.hostkit.dev/auth/callback\n     &state=optional_client_state\n   ```\n\n2. **User authenticates with Google**\n\n3. **Proxy validates token, creates signed identity payload**\n\n4. **Proxy redirects to project's return_url:**\n   ```\n   https://myapp.hostkit.dev/auth/callback?identity={signed_token}&state=...\n   ```\n\n5. **Frontend calls project auth service to exchange identity for session:**\n   ```javascript\n   const params = new URLSearchParams(window.location.search);\n   const identityToken = params.get('identity');\n\n   const response = await fetch('/auth/identity/verify', {\n     method: 'POST',\n     headers: { 'Content-Type': 'application/json' },\n     body: JSON.stringify({ token: identityToken })\n   });\n\n   const { user, session } = await response.json();\n   // session contains access_token and refresh_token\n   ```",
    "section": "Auth Service",
    "chunkType": "service",
    "tokens": [
      "web",
      "oauth",
      "flow",
      "via",
      "central",
      "proxy",
      "frontend",
      "redirects",
      "proxy",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "start",
      "project",
      "myapp",
      "return",
      "url",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "auth",
      "callback",
      "state",
      "optional",
      "client",
      "state",
      "user",
      "authenticates",
      "with",
      "google",
      "proxy",
      "validates",
      "token",
      "creates",
      "signed",
      "identity",
      "payload",
      "proxy",
      "redirects",
      "project",
      "return",
      "url",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "auth",
      "callback",
      "identity",
      "signed",
      "token",
      "state",
      "frontend",
      "calls",
      "project",
      "auth",
      "service",
      "exchange",
      "identity",
      "for",
      "session",
      "javascript",
      "const",
      "params",
      "new",
      "urlsearchparams",
      "window",
      "location",
      "search",
      "const",
      "identitytoken",
      "params",
      "get",
      "identity",
      "const",
      "response",
      "await",
      "fetch",
      "auth",
      "identity",
      "verify",
      "method",
      "post",
      "headers",
      "content",
      "type",
      "application",
      "json",
      "body",
      "json",
      "stringify",
      "token",
      "identitytoken",
      "const",
      "user",
      "session",
      "await",
      "response",
      "json",
      "session",
      "contains",
      "access",
      "token",
      "and",
      "refresh",
      "token"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "native-mobile-auth-direct-token-verification-5",
    "title": "Native Mobile Auth (Direct Token Verification)",
    "content": "For iOS/Android apps, bypass the proxy and use direct token verification:\n\n```\nPOST /auth/oauth/{provider}/verify-token\n{\n  \"id_token\": \"<token from Google/Apple SDK>\",\n  \"ios_client_id\": \"<for Google iOS>\",\n  \"bundle_id\": \"<for Apple iOS>\"\n}\n```\n\nThe auth service validates the token directly with Google/Apple and returns session tokens.",
    "section": "Auth Service",
    "chunkType": "service",
    "tokens": [
      "native",
      "mobile",
      "auth",
      "direct",
      "token",
      "verification",
      "for",
      "ios",
      "android",
      "apps",
      "bypass",
      "the",
      "proxy",
      "and",
      "use",
      "direct",
      "token",
      "verification",
      "post",
      "auth",
      "oauth",
      "provider",
      "verify",
      "token",
      "token",
      "token",
      "from",
      "google",
      "apple",
      "sdk",
      "ios",
      "client",
      "for",
      "google",
      "ios",
      "bundle",
      "for",
      "apple",
      "ios",
      "the",
      "auth",
      "service",
      "validates",
      "the",
      "token",
      "directly",
      "with",
      "google",
      "apple",
      "and",
      "returns",
      "session",
      "tokens"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "when-to-use-proxy-vs-direct-6",
    "title": "When to Use Proxy vs Direct",
    "content": "| Scenario | Method |\n|----------|--------|\n| Web browser OAuth | Proxy: `https://auth.hostkit.dev/oauth/google/start` |\n| Native iOS/Android | Direct: `POST /auth/oauth/google/verify-token` |\n| Server-to-server | Direct with API key |",
    "section": "Auth Service",
    "chunkType": "concept",
    "tokens": [
      "when",
      "use",
      "proxy",
      "direct",
      "scenario",
      "method",
      "web",
      "browser",
      "oauth",
      "proxy",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "start",
      "native",
      "ios",
      "android",
      "direct",
      "post",
      "auth",
      "oauth",
      "google",
      "verify",
      "token",
      "server",
      "server",
      "direct",
      "with",
      "api",
      "key"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "jwt-token-validation-7",
    "title": "JWT Token Validation",
    "content": "Projects validate tokens using the public key:\n\n```python\nfrom jose import jwt\n\ntoken = request.headers.get(\"Authorization\", \"\").replace(\"Bearer \", \"\")\npayload = jwt.decode(\n    token,\n    os.environ[\"AUTH_JWT_PUBLIC_KEY\"],\n    algorithms=[\"RS256\"],\n    audience=os.environ[\"AUTH_AUDIENCE\"]\n)\n```",
    "section": "Auth Service",
    "chunkType": "example",
    "tokens": [
      "jwt",
      "token",
      "validation",
      "projects",
      "validate",
      "tokens",
      "using",
      "the",
      "public",
      "key",
      "python",
      "from",
      "jose",
      "import",
      "jwt",
      "token",
      "request",
      "headers",
      "get",
      "authorization",
      "replace",
      "bearer",
      "payload",
      "jwt",
      "decode",
      "token",
      "environ",
      "auth",
      "jwt",
      "public",
      "key",
      "algorithms",
      "rs256",
      "audience",
      "environ",
      "auth",
      "audience"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "sync-public-key-8",
    "title": "Sync Public Key",
    "content": "If the project's key gets out of sync:\n```\nhostkit_execute: command=\"auth export-key myapp --update-env\"\nhostkit_execute: command=\"service restart myapp\"\n```",
    "section": "Auth Service",
    "chunkType": "example",
    "tokens": [
      "sync",
      "public",
      "key",
      "the",
      "project",
      "key",
      "gets",
      "out",
      "sync",
      "hostkit",
      "execute",
      "command",
      "auth",
      "export",
      "key",
      "myapp",
      "update",
      "env",
      "hostkit",
      "execute",
      "command",
      "service",
      "restart",
      "myapp"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "oauth-troubleshooting-9",
    "title": "OAuth Troubleshooting",
    "content": "#### Verify OAuth Configuration\n\nCheck if Google/Apple OAuth is correctly configured:\n```\nhostkit_execute: command=\"auth status myapp\"\n```\n\nReturns `providers.google: true` and `providers.apple: true` if configured.\n\n#### Required Environment Variables for Google OAuth\n\n| Variable | Description | Example |\n|----------|-------------|---------|\n| `GOOGLE_CLIENT_ID` | OAuth client ID from Google Cloud Console | `1234...apps.googleusercontent.com` |\n| `GOOGLE_CLIENT_SECRET` | OAuth client secret (keep secure) | `GOCSPX-...` |\n\nTo check current values:\n```\nhostkit_env_get: project=\"myapp\", keys=[\"GOOGLE_CLIENT_ID\", \"GOOGLE_CLIENT_SECRET\"]\n```\n\n#### Required Environment Variables for Apple OAuth\n\n| Variable | Description |\n|----------|-------------|\n| `APPLE_CLIENT_ID` | Services ID (e.g., `dev.hostkit.auth`) |\n| `APPLE_TEAM_ID` | Apple Developer Team ID (10 characters) |\n| `APPLE_KEY_ID` | Key ID from Apple Developer |\n| `APPLE_PRIVATE_KEY` | Private key content (or use `APPLE_PRIVATE_KEY_PATH`) |\n| `APPLE_BUNDLE_ID` | iOS app Bundle ID (for native apps only) |\n\n#### Google OAuth Redirect URIs\n\n**Central Callback URL (registered in Google Cloud Console):**\n```\nhttps://auth.hostkit.dev/oauth/google/callback\n```\n\nThis single URL handles OAuth for ALL HostKit projects via the central proxy.\n\n**OAuth Flow:**\n1. Frontend redirects to: `https://auth.hostkit.dev/oauth/google/start?project=myapp&return_url=https://myapp.hostkit.dev/auth/callback`\n2. After Google auth, proxy redirects to: `https://myapp.hostkit.dev/auth/callback?identity={signed_token}`\n3. Frontend calls: `POST /auth/identity/verify` with the identity token\n4. Auth service returns session tokens\n\n#### Viewing Auth Service Logs\n\nThe auth service runs as a separate systemd unit. View logs with:\n```bash\n# SSH to VPS and run:\njournalctl -u hostkit-{project}-auth -n 100 --no-pager\n\n# Follow logs in real-time:\njournalctl -u hostkit-{project}-auth -f\n\n# Filter for errors only:\njournalctl -u hostkit-{project}-auth -p err -n 50\n```\n\n**Note:** The `service logs` command only shows the main project service. Auth service logs require direct journalctl access.\n\n#### Common OAuth Errors",
    "section": "Auth Service",
    "chunkType": "service",
    "tokens": [
      "oauth",
      "troubleshooting",
      "verify",
      "oauth",
      "configuration",
      "check",
      "google",
      "apple",
      "oauth",
      "correctly",
      "configured",
      "hostkit",
      "execute",
      "command",
      "auth",
      "status",
      "myapp",
      "returns",
      "providers",
      "google",
      "true",
      "and",
      "providers",
      "apple",
      "true",
      "configured",
      "required",
      "environment",
      "variables",
      "for",
      "google",
      "oauth",
      "variable",
      "description",
      "example",
      "google",
      "client",
      "oauth",
      "client",
      "from",
      "google",
      "cloud",
      "console",
      "1234",
      "apps",
      "googleusercontent",
      "com",
      "google",
      "client",
      "secret",
      "oauth",
      "client",
      "secret",
      "keep",
      "secure",
      "gocspx",
      "check",
      "current",
      "values",
      "hostkit",
      "env",
      "get",
      "project",
      "myapp",
      "keys",
      "google",
      "client",
      "google",
      "client",
      "secret",
      "required",
      "environment",
      "variables",
      "for",
      "apple",
      "oauth",
      "variable",
      "description",
      "apple",
      "client",
      "services",
      "dev",
      "hostkit",
      "auth",
      "apple",
      "team",
      "apple",
      "developer",
      "team",
      "characters",
      "apple",
      "key",
      "key",
      "from",
      "apple",
      "developer",
      "apple",
      "private",
      "key",
      "private",
      "key",
      "content",
      "use",
      "apple",
      "private",
      "key",
      "path",
      "apple",
      "bundle",
      "ios",
      "app",
      "bundle",
      "for",
      "native",
      "apps",
      "only",
      "google",
      "oauth",
      "redirect",
      "uris",
      "central",
      "callback",
      "url",
      "registered",
      "google",
      "cloud",
      "console",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "callback",
      "this",
      "single",
      "url",
      "handles",
      "oauth",
      "for",
      "all",
      "hostkit",
      "projects",
      "via",
      "the",
      "central",
      "proxy",
      "oauth",
      "flow",
      "frontend",
      "redirects",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "start",
      "project",
      "myapp",
      "return",
      "url",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "auth",
      "callback",
      "after",
      "google",
      "auth",
      "proxy",
      "redirects",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "auth",
      "callback",
      "identity",
      "signed",
      "token",
      "frontend",
      "calls",
      "post",
      "auth",
      "identity",
      "verify",
      "with",
      "the",
      "identity",
      "token",
      "auth",
      "service",
      "returns",
      "session",
      "tokens",
      "viewing",
      "auth",
      "service",
      "logs",
      "the",
      "auth",
      "service",
      "runs",
      "separate",
      "systemd",
      "unit",
      "view",
      "logs",
      "with",
      "bash",
      "ssh",
      "vps",
      "and",
      "run",
      "journalctl",
      "hostkit",
      "project",
      "auth",
      "100",
      "pager",
      "follow",
      "logs",
      "real",
      "time",
      "journalctl",
      "hostkit",
      "project",
      "auth",
      "filter",
      "for",
      "errors",
      "only",
      "journalctl",
      "hostkit",
      "project",
      "auth",
      "err",
      "note",
      "the",
      "service",
      "logs",
      "command",
      "only",
      "shows",
      "the",
      "main",
      "project",
      "service",
      "auth",
      "service",
      "logs",
      "require",
      "direct",
      "journalctl",
      "access",
      "common",
      "oauth",
      "errors"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "oauth-troubleshooting-10",
    "title": "OAuth Troubleshooting",
    "content": "| Error | Cause | Solution |\n|-------|-------|----------|\n| `redirect_uri_mismatch` | Callback URL not registered in Google Console | Central callback is `https://auth.hostkit.dev/oauth/google/callback` - this is platform-managed |\n| `invalid_client` | Wrong client ID or secret | Verify OAuth credentials via `hostkit auth config myapp` |\n| `access_denied` | User cancelled or consent screen issue | Check OAuth consent screen configuration in Google Console |\n| `Invalid or expired state parameter` | State token expired (10 min lifetime) or replayed | Retry the OAuth flow from the beginning |\n| `No ID token in Google response` | Google didn't return id_token | Ensure `openid` scope is requested |\n| `Token validation failed` | JWT signature verification failed | Check if Google's public keys can be fetched (network issue) |\n| `Google OAuth is not configured` | OAuth creds not synced to auth service .env | Run `hostkit auth config myapp --google-client-id=... --google-client-secret=...` |\n\n#### OAuth Flow Debugging Checklist\n\n1. **Check auth service is running:**\n   ```\n   hostkit_execute: command=\"health myapp\"\n   ```\n   Look for auth service status.\n\n2. **Verify OAuth is enabled:**\n   ```\n   hostkit_execute: command=\"auth status myapp\"\n   ```\n   Confirm `providers.google: true`.\n\n3. **Check environment variables:**\n   ```\n   hostkit_env_get: project=\"myapp\", keys=[\"GOOGLE_CLIENT_ID\", \"GOOGLE_CLIENT_SECRET\"]\n   ```\n   Ensure both are set (secrets show as `********`).\n\n4. **Verify Google Console setup:**\n   - OAuth consent screen configured\n   - Central redirect URI registered: `https://auth.hostkit.dev/oauth/google/callback`\n   - Application not in \"Testing\" mode if you want all users (or add test users)\n\n5. **Check auth service logs for the actual exception:**\n   ```bash\n   journalctl -u hostkit-{project}-auth -n 50 --no-pager\n   ```\n\n#### Reconfigure OAuth Credentials\n\nIf credentials need updating:\n```\nhostkit_env_set:\n  project: \"myapp\"\n  variables:\n    GOOGLE_CLIENT_ID: \"new-client-id.apps.googleusercontent.com\"\n    GOOGLE_CLIENT_SECRET: \"new-secret\"\n  restart: true\n```\n\nOr pull fresh credentials from platform:\n```\nhostkit_execute: command=\"auth config myapp --from-platform\"\nhostkit_execute: command=\"service restart myapp-auth\"\n```\n\n---",
    "section": "Auth Service",
    "chunkType": "service",
    "tokens": [
      "oauth",
      "troubleshooting",
      "error",
      "cause",
      "solution",
      "redirect",
      "uri",
      "mismatch",
      "callback",
      "url",
      "not",
      "registered",
      "google",
      "console",
      "central",
      "callback",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "callback",
      "this",
      "platform",
      "managed",
      "invalid",
      "client",
      "wrong",
      "client",
      "secret",
      "verify",
      "oauth",
      "credentials",
      "via",
      "hostkit",
      "auth",
      "config",
      "myapp",
      "access",
      "denied",
      "user",
      "cancelled",
      "consent",
      "screen",
      "issue",
      "check",
      "oauth",
      "consent",
      "screen",
      "configuration",
      "google",
      "console",
      "invalid",
      "expired",
      "state",
      "parameter",
      "state",
      "token",
      "expired",
      "min",
      "lifetime",
      "replayed",
      "retry",
      "the",
      "oauth",
      "flow",
      "from",
      "the",
      "beginning",
      "token",
      "google",
      "response",
      "google",
      "didn",
      "return",
      "token",
      "ensure",
      "openid",
      "scope",
      "requested",
      "token",
      "validation",
      "failed",
      "jwt",
      "signature",
      "verification",
      "failed",
      "check",
      "google",
      "public",
      "keys",
      "can",
      "fetched",
      "network",
      "issue",
      "google",
      "oauth",
      "not",
      "configured",
      "oauth",
      "creds",
      "not",
      "synced",
      "auth",
      "service",
      "env",
      "run",
      "hostkit",
      "auth",
      "config",
      "myapp",
      "google",
      "client",
      "google",
      "client",
      "secret",
      "oauth",
      "flow",
      "debugging",
      "checklist",
      "check",
      "auth",
      "service",
      "running",
      "hostkit",
      "execute",
      "command",
      "health",
      "myapp",
      "look",
      "for",
      "auth",
      "service",
      "status",
      "verify",
      "oauth",
      "enabled",
      "hostkit",
      "execute",
      "command",
      "auth",
      "status",
      "myapp",
      "confirm",
      "providers",
      "google",
      "true",
      "check",
      "environment",
      "variables",
      "hostkit",
      "env",
      "get",
      "project",
      "myapp",
      "keys",
      "google",
      "client",
      "google",
      "client",
      "secret",
      "ensure",
      "both",
      "are",
      "set",
      "secrets",
      "show",
      "verify",
      "google",
      "console",
      "setup",
      "oauth",
      "consent",
      "screen",
      "configured",
      "central",
      "redirect",
      "uri",
      "registered",
      "https",
      "auth",
      "hostkit",
      "dev",
      "oauth",
      "google",
      "callback",
      "application",
      "not",
      "testing",
      "mode",
      "you",
      "want",
      "all",
      "users",
      "add",
      "test",
      "users",
      "check",
      "auth",
      "service",
      "logs",
      "for",
      "the",
      "actual",
      "exception",
      "bash",
      "journalctl",
      "hostkit",
      "project",
      "auth",
      "pager",
      "reconfigure",
      "oauth",
      "credentials",
      "credentials",
      "need",
      "updating",
      "hostkit",
      "env",
      "set",
      "project",
      "myapp",
      "variables",
      "google",
      "client",
      "new",
      "client",
      "apps",
      "googleusercontent",
      "com",
      "google",
      "client",
      "secret",
      "new",
      "secret",
      "restart",
      "true",
      "pull",
      "fresh",
      "credentials",
      "from",
      "platform",
      "hostkit",
      "execute",
      "command",
      "auth",
      "config",
      "myapp",
      "from",
      "platform",
      "hostkit",
      "execute",
      "command",
      "service",
      "restart",
      "myapp",
      "auth"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "overview-11",
    "title": "Overview",
    "content": "HostKit Payments provides Stripe Connect integration with Express accounts.\n\n**Enable:**\n```\nhostkit_execute: command=\"payments enable myapp\"\n```\n\n**What you get:**\n- Stripe Express Connect account\n- FastAPI payment service at port+2000\n- 17 database tables (transactions, subscriptions, invoices, etc.)\n- Webhook handler for Stripe events\n- Payment intent and subscription APIs",
    "section": "Payments Service",
    "chunkType": "command",
    "tokens": [
      "overview",
      "hostkit",
      "payments",
      "provides",
      "stripe",
      "connect",
      "integration",
      "with",
      "express",
      "accounts",
      "enable",
      "hostkit",
      "execute",
      "command",
      "payments",
      "enable",
      "myapp",
      "what",
      "you",
      "get",
      "stripe",
      "express",
      "connect",
      "account",
      "fastapi",
      "payment",
      "service",
      "port",
      "2000",
      "database",
      "tables",
      "transactions",
      "subscriptions",
      "invoices",
      "etc",
      "webhook",
      "handler",
      "for",
      "stripe",
      "events",
      "payment",
      "intent",
      "and",
      "subscription",
      "apis"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "api-endpoints-12",
    "title": "API Endpoints",
    "content": "| Endpoint | Method | Purpose |\n|----------|--------|---------|\n| `/payments/health` | GET | Health check |\n| `/payments/onboard` | GET | Stripe onboarding URL |\n| `/payments/status` | GET | Account capabilities |\n| `/payments/intents` | POST | Create payment intent |\n| `/payments/webhooks/stripe` | POST | Stripe webhook handler |\n| `/payments/invoices` | GET | List invoices |\n| `/payments/subscriptions` | POST | Create subscription |\n| `/payments/subscription/{id}` | GET | Get subscription |",
    "section": "Payments Service",
    "chunkType": "concept",
    "tokens": [
      "api",
      "endpoints",
      "endpoint",
      "method",
      "purpose",
      "payments",
      "health",
      "get",
      "health",
      "check",
      "payments",
      "onboard",
      "get",
      "stripe",
      "onboarding",
      "url",
      "payments",
      "status",
      "get",
      "account",
      "capabilities",
      "payments",
      "intents",
      "post",
      "create",
      "payment",
      "intent",
      "payments",
      "webhooks",
      "stripe",
      "post",
      "stripe",
      "webhook",
      "handler",
      "payments",
      "invoices",
      "get",
      "list",
      "invoices",
      "payments",
      "subscriptions",
      "post",
      "create",
      "subscription",
      "payments",
      "subscription",
      "get",
      "get",
      "subscription"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "environment-variables-auto-set-13",
    "title": "Environment Variables (auto-set)",
    "content": "```\nSTRIPE_ACCOUNT_ID=acct_...\nPAYMENTS_URL=https://myapp.hostkit.dev/payments\n```\n\nPlatform credentials in `/etc/hostkit/stripe.ini` (root only).",
    "section": "Payments Service",
    "chunkType": "example",
    "tokens": [
      "environment",
      "variables",
      "auto",
      "set",
      "stripe",
      "account",
      "acct",
      "payments",
      "url",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "payments",
      "platform",
      "credentials",
      "etc",
      "hostkit",
      "stripe",
      "ini",
      "root",
      "only"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "stripe-connect-flow-14",
    "title": "Stripe Connect Flow",
    "content": "1. Enable payments → Express account created\n2. Call `/payments/onboard` → Get Stripe onboarding URL\n3. User completes onboarding on Stripe\n4. Account activated (charges_enabled, payouts_enabled)\n5. Create payments via `/payments/intents`",
    "section": "Payments Service",
    "chunkType": "concept",
    "tokens": [
      "stripe",
      "connect",
      "flow",
      "enable",
      "payments",
      "express",
      "account",
      "created",
      "call",
      "payments",
      "onboard",
      "get",
      "stripe",
      "onboarding",
      "url",
      "user",
      "completes",
      "onboarding",
      "stripe",
      "account",
      "activated",
      "charges",
      "enabled",
      "payouts",
      "enabled",
      "create",
      "payments",
      "via",
      "payments",
      "intents"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "creating-a-payment-15",
    "title": "Creating a Payment",
    "content": "```python\nimport httpx\n\nresponse = httpx.post(\n    f\"{os.environ['PAYMENTS_URL']}/intents\",\n    json={\n        \"amount\": 2500,  # $25.00 in cents\n        \"currency\": \"usd\",\n        \"description\": \"Service payment\"\n    }\n)\nintent = response.json()\n# Returns: client_secret for Stripe.js\n```",
    "section": "Payments Service",
    "chunkType": "service",
    "tokens": [
      "creating",
      "payment",
      "python",
      "import",
      "httpx",
      "response",
      "httpx",
      "post",
      "environ",
      "payments",
      "url",
      "intents",
      "json",
      "amount",
      "2500",
      "cents",
      "currency",
      "usd",
      "description",
      "service",
      "payment",
      "intent",
      "response",
      "json",
      "returns",
      "client",
      "secret",
      "for",
      "stripe"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "webhook-events-16",
    "title": "Webhook Events",
    "content": "All Stripe events sync automatically:\n- `payment_intent.succeeded`\n- `payment_intent.failed`\n- `customer.subscription.created`\n- `invoice.paid`\n- etc.\n\n---",
    "section": "Payments Service",
    "chunkType": "concept",
    "tokens": [
      "webhook",
      "events",
      "all",
      "stripe",
      "events",
      "sync",
      "automatically",
      "payment",
      "intent",
      "succeeded",
      "payment",
      "intent",
      "failed",
      "customer",
      "subscription",
      "created",
      "invoice",
      "paid",
      "etc"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "overview-17",
    "title": "Overview",
    "content": "HostKit SMS provides TCPA-compliant transactional messaging via Twilio.\n\n**Enable:**\n```\nhostkit_execute: command=\"sms enable myapp\"\n```\n\n**What you get:**\n- Twilio messaging service\n- FastAPI SMS service at port+3000\n- 5 database tables (messages, consents, templates, etc.)\n- 11 pre-configured templates\n- TCPA consent enforcement\n- Webhook handlers for delivery/inbound",
    "section": "SMS Service",
    "chunkType": "command",
    "tokens": [
      "overview",
      "hostkit",
      "sms",
      "provides",
      "tcpa",
      "compliant",
      "transactional",
      "messaging",
      "via",
      "twilio",
      "enable",
      "hostkit",
      "execute",
      "command",
      "sms",
      "enable",
      "myapp",
      "what",
      "you",
      "get",
      "twilio",
      "messaging",
      "service",
      "fastapi",
      "sms",
      "service",
      "port",
      "3000",
      "database",
      "tables",
      "messages",
      "consents",
      "templates",
      "etc",
      "pre",
      "configured",
      "templates",
      "tcpa",
      "consent",
      "enforcement",
      "webhook",
      "handlers",
      "for",
      "delivery",
      "inbound"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "api-endpoints-18",
    "title": "API Endpoints",
    "content": "| Endpoint | Method | Purpose |\n|----------|--------|---------|\n| `/api/sms/health` | GET | Health check |\n| `/api/sms/send` | POST | Send SMS (checks consent) |\n| `/api/sms/consent` | GET | List consents |\n| `/api/sms/consent` | POST | Record consent |\n| `/api/sms/consent/{id}` | DELETE | Revoke consent |\n| `/api/sms/webhook/inbound` | POST | Inbound message handler |\n| `/api/sms/webhook/status` | POST | Delivery status handler |",
    "section": "SMS Service",
    "chunkType": "concept",
    "tokens": [
      "api",
      "endpoints",
      "endpoint",
      "method",
      "purpose",
      "api",
      "sms",
      "health",
      "get",
      "health",
      "check",
      "api",
      "sms",
      "send",
      "post",
      "send",
      "sms",
      "checks",
      "consent",
      "api",
      "sms",
      "consent",
      "get",
      "list",
      "consents",
      "api",
      "sms",
      "consent",
      "post",
      "record",
      "consent",
      "api",
      "sms",
      "consent",
      "delete",
      "revoke",
      "consent",
      "api",
      "sms",
      "webhook",
      "inbound",
      "post",
      "inbound",
      "message",
      "handler",
      "api",
      "sms",
      "webhook",
      "status",
      "post",
      "delivery",
      "status",
      "handler"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "default-templates-19",
    "title": "Default Templates",
    "content": "| Template | Message |\n|----------|---------|\n| `booking_confirmation` | \"Your booking #{booking_id} is confirmed for {datetime}.\" |\n| `booking_reminder_24h` | \"Reminder: Your booking is tomorrow at {time}.\" |\n| `booking_cancelled` | \"Your booking #{booking_id} has been cancelled.\" |\n| `payment_link` | \"Complete your payment: {payment_url}\" |\n| `payment_receipt` | \"Payment received: ${amount}. Thank you!\" |\n| `otp_verification` | \"Your verification code is {code}. Valid for 10 minutes.\" |\n| `opt_in_confirmation` | \"You're subscribed to {service_name} updates. Reply STOP to unsubscribe.\" |",
    "section": "SMS Service",
    "chunkType": "concept",
    "tokens": [
      "default",
      "templates",
      "template",
      "message",
      "booking",
      "confirmation",
      "your",
      "booking",
      "booking",
      "confirmed",
      "for",
      "datetime",
      "booking",
      "reminder",
      "24h",
      "reminder",
      "your",
      "booking",
      "tomorrow",
      "time",
      "booking",
      "cancelled",
      "your",
      "booking",
      "booking",
      "has",
      "been",
      "cancelled",
      "payment",
      "link",
      "complete",
      "your",
      "payment",
      "payment",
      "url",
      "payment",
      "receipt",
      "payment",
      "received",
      "amount",
      "thank",
      "you",
      "otp",
      "verification",
      "your",
      "verification",
      "code",
      "code",
      "valid",
      "for",
      "minutes",
      "opt",
      "confirmation",
      "you",
      "subscribed",
      "service",
      "name",
      "updates",
      "reply",
      "stop",
      "unsubscribe"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "tcpa-consent-20",
    "title": "TCPA Consent",
    "content": "Consent required before first message:\n\n```python\n# Record consent\nhttpx.post(f\"{SMS_URL}/consent\", json={\n    \"phone\": \"+15551234567\",\n    \"purpose\": \"booking_updates\",\n    \"ip_address\": request.client.host,\n    \"user_agent\": request.headers.get(\"user-agent\")\n})\n\n# Send message (fails without consent)\nhttpx.post(f\"{SMS_URL}/send\", json={\n    \"to\": \"+15551234567\",\n    \"template\": \"booking_confirmation\",\n    \"variables\": {\"booking_id\": \"123\", \"datetime\": \"Jan 20, 2pm\"}\n})\n```",
    "section": "SMS Service",
    "chunkType": "example",
    "tokens": [
      "tcpa",
      "consent",
      "consent",
      "required",
      "before",
      "first",
      "message",
      "python",
      "record",
      "consent",
      "httpx",
      "post",
      "sms",
      "url",
      "consent",
      "json",
      "phone",
      "15551234567",
      "purpose",
      "booking",
      "updates",
      "address",
      "request",
      "client",
      "host",
      "user",
      "agent",
      "request",
      "headers",
      "get",
      "user",
      "agent",
      "send",
      "message",
      "fails",
      "without",
      "consent",
      "httpx",
      "post",
      "sms",
      "url",
      "send",
      "json",
      "15551234567",
      "template",
      "booking",
      "confirmation",
      "variables",
      "booking",
      "123",
      "datetime",
      "jan",
      "2pm"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "overview-21",
    "title": "Overview",
    "content": "HostKit Voice provides AI-powered phone conversations with real-time streaming.\n\n**Enable:**\n```\nhostkit_execute: command=\"voice enable myapp\"\n```\n\n**Architecture:**\nUnlike per-project services, Voice runs as a central service on port 8900 handling all projects. This is required for WebSocket streaming performance.\n\n**Streaming pipeline:**\nTwilio → Deepgram (STT) → OpenAI/Anthropic (LLM) → Cartesia (TTS) → Twilio",
    "section": "Voice Service",
    "chunkType": "command",
    "tokens": [
      "overview",
      "hostkit",
      "voice",
      "provides",
      "powered",
      "phone",
      "conversations",
      "with",
      "real",
      "time",
      "streaming",
      "enable",
      "hostkit",
      "execute",
      "command",
      "voice",
      "enable",
      "myapp",
      "architecture",
      "unlike",
      "per",
      "project",
      "services",
      "voice",
      "runs",
      "central",
      "service",
      "port",
      "8900",
      "handling",
      "all",
      "projects",
      "this",
      "required",
      "for",
      "websocket",
      "streaming",
      "performance",
      "streaming",
      "pipeline",
      "twilio",
      "deepgram",
      "stt",
      "openai",
      "anthropic",
      "llm",
      "cartesia",
      "tts",
      "twilio"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "agent-configuration-22",
    "title": "Agent Configuration",
    "content": "Agents are YAML files at `/home/{project}/.voice/agents/{name}.yaml`:\n\n```yaml\nname: customer_service\ndescription: Customer service agent\n\nllm:\n  provider: openai  # or anthropic\n  model: gpt-4\n  temperature: 0.7\n  max_tokens: 150\n\nvoice:\n  name: \"friendly-female\"\n  speed: 1.0\n\nsystem_prompt: |\n  You are a friendly customer service agent.\n  Keep responses under 2 sentences.\n\nfunctions:\n  - name: check_booking\n    url: https://myapp.hostkit.dev/api/bookings/{booking_id}\n    method: GET\n\nbehavior:\n  initial_greeting: \"Hello! How can I help you today?\"\n  max_call_duration: 300\n  silence_timeout: 10\n```",
    "section": "Voice Service",
    "chunkType": "example",
    "tokens": [
      "agent",
      "configuration",
      "agents",
      "are",
      "yaml",
      "files",
      "home",
      "project",
      "voice",
      "agents",
      "name",
      "yaml",
      "yaml",
      "name",
      "customer",
      "service",
      "description",
      "customer",
      "service",
      "agent",
      "llm",
      "provider",
      "openai",
      "anthropic",
      "model",
      "gpt",
      "temperature",
      "max",
      "tokens",
      "150",
      "voice",
      "name",
      "friendly",
      "female",
      "speed",
      "system",
      "prompt",
      "you",
      "are",
      "friendly",
      "customer",
      "service",
      "agent",
      "keep",
      "responses",
      "under",
      "sentences",
      "functions",
      "name",
      "check",
      "booking",
      "url",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "api",
      "bookings",
      "booking",
      "method",
      "get",
      "behavior",
      "initial",
      "greeting",
      "hello",
      "how",
      "can",
      "help",
      "you",
      "today",
      "max",
      "call",
      "duration",
      "300",
      "silence",
      "timeout"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "twilio-configuration-23",
    "title": "Twilio Configuration",
    "content": "Point your Twilio number webhook to:\n```\nhttps://145.223.74.213:8900/voice?project=myapp&agent=customer_service\n```",
    "section": "Voice Service",
    "chunkType": "example",
    "tokens": [
      "twilio",
      "configuration",
      "point",
      "your",
      "twilio",
      "number",
      "webhook",
      "https",
      "145",
      "223",
      "213",
      "8900",
      "voice",
      "project",
      "myapp",
      "agent",
      "customer",
      "service"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "cost-model-24",
    "title": "Cost Model",
    "content": "- Twilio Voice: $0.013/min inbound, $0.026/min outbound\n- Deepgram STT: $0.0043/min\n- Cartesia TTS: $0.002/min\n- OpenAI GPT-4: ~$0.06 per 1K tokens\n- **Total: ~$0.02-0.03/min**\n\n---",
    "section": "Voice Service",
    "chunkType": "concept",
    "tokens": [
      "cost",
      "model",
      "twilio",
      "voice",
      "013",
      "min",
      "inbound",
      "026",
      "min",
      "outbound",
      "deepgram",
      "stt",
      "0043",
      "min",
      "cartesia",
      "tts",
      "002",
      "min",
      "openai",
      "gpt",
      "per",
      "tokens",
      "total",
      "min"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "overview-25",
    "title": "Overview",
    "content": "HostKit Booking provides time-first appointment scheduling with provider pooling.\n\n**Enable:**\n```\nhostkit_execute: command=\"booking enable myapp\"\n```\n\n**What you get:**\n- FastAPI booking service at port+4000\n- 17 database tables\n- Time-first UX (select time before service)\n- Provider pooling (\"Any Available\")\n- Room/resource management\n- Intake forms\n- Payment integration",
    "section": "Booking Service",
    "chunkType": "command",
    "tokens": [
      "overview",
      "hostkit",
      "booking",
      "provides",
      "time",
      "first",
      "appointment",
      "scheduling",
      "with",
      "provider",
      "pooling",
      "enable",
      "hostkit",
      "execute",
      "command",
      "booking",
      "enable",
      "myapp",
      "what",
      "you",
      "get",
      "fastapi",
      "booking",
      "service",
      "port",
      "4000",
      "database",
      "tables",
      "time",
      "first",
      "select",
      "time",
      "before",
      "service",
      "provider",
      "pooling",
      "any",
      "available",
      "room",
      "resource",
      "management",
      "intake",
      "forms",
      "payment",
      "integration"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "api-endpoints-26",
    "title": "API Endpoints",
    "content": "| Endpoint | Method | Purpose |\n|----------|--------|---------|\n| `/api/booking/health` | GET | Health check |\n| `/api/booking/config` | GET | Configuration |\n| `/api/booking/providers` | GET | List providers |\n| `/api/booking/services` | GET | List services |\n| `/api/booking/availability/dates` | GET | Available dates |\n| `/api/booking/availability/slots` | GET | Time slots for date |\n| `/api/booking/appointments` | POST | Create appointment |\n| `/api/booking/appointments/{id}` | GET | Get appointment |\n| `/api/booking/appointments/{id}` | PATCH | Update appointment |\n| `/api/booking/appointments/{id}` | DELETE | Cancel appointment |",
    "section": "Booking Service",
    "chunkType": "concept",
    "tokens": [
      "api",
      "endpoints",
      "endpoint",
      "method",
      "purpose",
      "api",
      "booking",
      "health",
      "get",
      "health",
      "check",
      "api",
      "booking",
      "config",
      "get",
      "configuration",
      "api",
      "booking",
      "providers",
      "get",
      "list",
      "providers",
      "api",
      "booking",
      "services",
      "get",
      "list",
      "services",
      "api",
      "booking",
      "availability",
      "dates",
      "get",
      "available",
      "dates",
      "api",
      "booking",
      "availability",
      "slots",
      "get",
      "time",
      "slots",
      "for",
      "date",
      "api",
      "booking",
      "appointments",
      "post",
      "create",
      "appointment",
      "api",
      "booking",
      "appointments",
      "get",
      "get",
      "appointment",
      "api",
      "booking",
      "appointments",
      "patch",
      "update",
      "appointment",
      "api",
      "booking",
      "appointments",
      "delete",
      "cancel",
      "appointment"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "time-first-flow-27",
    "title": "Time-First Flow",
    "content": "1. Select date → `GET /availability/dates`\n2. Select time → `GET /availability/slots?date=YYYY-MM-DD`\n3. Select service → `GET /services`\n4. Select provider → \"Any Available\" or specific\n5. Fill intake form (if required)\n6. Confirm → `POST /appointments`",
    "section": "Booking Service",
    "chunkType": "concept",
    "tokens": [
      "time",
      "first",
      "flow",
      "select",
      "date",
      "get",
      "availability",
      "dates",
      "select",
      "time",
      "get",
      "availability",
      "slots",
      "date",
      "yyyy",
      "select",
      "service",
      "get",
      "services",
      "select",
      "provider",
      "any",
      "available",
      "specific",
      "fill",
      "intake",
      "form",
      "required",
      "confirm",
      "post",
      "appointments"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "provider-pooling-28",
    "title": "Provider Pooling",
    "content": "\"Any Available\" assigns the first available provider based on:\n- Provider availability rules\n- Service capabilities\n- Room availability",
    "section": "Booking Service",
    "chunkType": "concept",
    "tokens": [
      "provider",
      "pooling",
      "any",
      "available",
      "assigns",
      "the",
      "first",
      "available",
      "provider",
      "based",
      "provider",
      "availability",
      "rules",
      "service",
      "capabilities",
      "room",
      "availability"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "seed-demo-data-29",
    "title": "Seed Demo Data",
    "content": "```\nhostkit_execute: command=\"booking seed myapp\"\n```\n\nCreates sample providers, services, rooms, and availability rules.\n\n---",
    "section": "Booking Service",
    "chunkType": "example",
    "tokens": [
      "seed",
      "demo",
      "data",
      "hostkit",
      "execute",
      "command",
      "booking",
      "seed",
      "myapp",
      "creates",
      "sample",
      "providers",
      "services",
      "rooms",
      "and",
      "availability",
      "rules"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "overview-30",
    "title": "Overview",
    "content": "HostKit Chatbot provides AI-powered conversational interfaces with embeddable widgets.\n\n**Enable:**\n```\nhostkit_execute: command=\"chatbot enable myapp\"\n```\n\n**What you get:**\n- FastAPI chatbot service at port+5000\n- Embeddable vanilla JS widget\n- SSE streaming responses\n- Anthropic and OpenAI support\n- Conversation history\n- Rate limiting",
    "section": "Chatbot Service",
    "chunkType": "command",
    "tokens": [
      "overview",
      "hostkit",
      "chatbot",
      "provides",
      "powered",
      "conversational",
      "interfaces",
      "with",
      "embeddable",
      "widgets",
      "enable",
      "hostkit",
      "execute",
      "command",
      "chatbot",
      "enable",
      "myapp",
      "what",
      "you",
      "get",
      "fastapi",
      "chatbot",
      "service",
      "port",
      "5000",
      "embeddable",
      "vanilla",
      "widget",
      "sse",
      "streaming",
      "responses",
      "anthropic",
      "and",
      "openai",
      "support",
      "conversation",
      "history",
      "rate",
      "limiting"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "api-endpoints-31",
    "title": "API Endpoints",
    "content": "| Endpoint | Method | Purpose |\n|----------|--------|---------|\n| `/chatbot/health` | GET | Health check |\n| `/chatbot/chat` | POST | Send message |\n| `/chatbot/chat/stream` | GET | SSE stream for response |\n| `/chatbot/chat/end` | POST | End conversation |\n| `/chatbot/conversations` | GET | List conversations |\n| `/chatbot/conversations/{id}` | GET | Get conversation |\n| `/chatbot/widget/config` | GET | Widget configuration |\n| `/chatbot/widget.js` | GET | Widget script |",
    "section": "Chatbot Service",
    "chunkType": "concept",
    "tokens": [
      "api",
      "endpoints",
      "endpoint",
      "method",
      "purpose",
      "chatbot",
      "health",
      "get",
      "health",
      "check",
      "chatbot",
      "chat",
      "post",
      "send",
      "message",
      "chatbot",
      "chat",
      "stream",
      "get",
      "sse",
      "stream",
      "for",
      "response",
      "chatbot",
      "chat",
      "end",
      "post",
      "end",
      "conversation",
      "chatbot",
      "conversations",
      "get",
      "list",
      "conversations",
      "chatbot",
      "conversations",
      "get",
      "get",
      "conversation",
      "chatbot",
      "widget",
      "config",
      "get",
      "widget",
      "configuration",
      "chatbot",
      "widget",
      "get",
      "widget",
      "script"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "custom-chat-interface-32",
    "title": "Custom Chat Interface",
    "content": "```typescript\n// Send message\nconst res = await fetch('https://myapp.hostkit.dev/chatbot/chat', {\n  method: 'POST',\n  headers: {\n    'Authorization': `Bearer ${API_KEY}`,\n    'Content-Type': 'application/json'\n  },\n  body: JSON.stringify({ message: 'Hello!', session_id: 'user-123' }),\n});\nconst { conversation_id } = await res.json();\n\n// Stream response via SSE\nconst evtSource = new EventSource(\n  `https://myapp.hostkit.dev/chatbot/chat/stream?conversation_id=${conversation_id}&api_key=${API_KEY}`\n);\nevtSource.addEventListener('message', (e) => appendChunk(e.data));\nevtSource.addEventListener('done', () => evtSource.close());\n```",
    "section": "Chatbot Service",
    "chunkType": "example",
    "tokens": [
      "custom",
      "chat",
      "interface",
      "typescript",
      "send",
      "message",
      "const",
      "res",
      "await",
      "fetch",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "chatbot",
      "chat",
      "method",
      "post",
      "headers",
      "authorization",
      "bearer",
      "api",
      "key",
      "content",
      "type",
      "application",
      "json",
      "body",
      "json",
      "stringify",
      "message",
      "hello",
      "session",
      "user",
      "123",
      "const",
      "conversation",
      "await",
      "res",
      "json",
      "stream",
      "response",
      "via",
      "sse",
      "const",
      "evtsource",
      "new",
      "eventsource",
      "https",
      "myapp",
      "hostkit",
      "dev",
      "chatbot",
      "chat",
      "stream",
      "conversation",
      "conversation",
      "api",
      "key",
      "api",
      "key",
      "evtsource",
      "addeventlistener",
      "message",
      "appendchunk",
      "data",
      "evtsource",
      "addeventlistener",
      "done",
      "evtsource",
      "close"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "configuration-33",
    "title": "Configuration",
    "content": "```\nhostkit_execute: command=\"chatbot config myapp --name 'Support Bot' --model claude-sonnet-4-20250514 --theme dark\"\n```\n\nOptions:\n- `--name` - Bot display name\n- `--system-prompt` - System instructions\n- `--suggested-questions` - JSON array of suggested questions\n- `--position` - bottom-right, bottom-left, top-right, top-left\n- `--primary-color` - Hex color\n- `--theme` - light, dark, auto\n- `--model` - claude-sonnet-4-20250514, gpt-4o, etc.",
    "section": "Chatbot Service",
    "chunkType": "example",
    "tokens": [
      "configuration",
      "hostkit",
      "execute",
      "command",
      "chatbot",
      "config",
      "myapp",
      "name",
      "support",
      "bot",
      "model",
      "claude",
      "sonnet",
      "20250514",
      "theme",
      "dark",
      "options",
      "name",
      "bot",
      "display",
      "name",
      "system",
      "prompt",
      "system",
      "instructions",
      "suggested",
      "questions",
      "json",
      "array",
      "suggested",
      "questions",
      "position",
      "bottom",
      "right",
      "bottom",
      "left",
      "top",
      "right",
      "top",
      "left",
      "primary",
      "color",
      "hex",
      "color",
      "theme",
      "light",
      "dark",
      "auto",
      "model",
      "claude",
      "sonnet",
      "20250514",
      "gpt",
      "etc"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "supported-models-34",
    "title": "Supported Models",
    "content": "| Provider | Models |\n|----------|--------|\n| anthropic | claude-sonnet-4-20250514, claude-3-5-haiku-20241022, claude-opus-4-20250514 |\n| openai | gpt-4o, gpt-4-turbo, gpt-3.5-turbo |\n\n---",
    "section": "Chatbot Service",
    "chunkType": "concept",
    "tokens": [
      "supported",
      "models",
      "provider",
      "models",
      "anthropic",
      "claude",
      "sonnet",
      "20250514",
      "claude",
      "haiku",
      "20241022",
      "claude",
      "opus",
      "20250514",
      "openai",
      "gpt",
      "gpt",
      "turbo",
      "gpt",
      "turbo"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "overview-35",
    "title": "Overview",
    "content": "HostKit R2 provides S3-compatible object storage via Cloudflare R2 with zero egress fees.\n\n**Enable:**\n```\nhostkit_execute: command=\"r2 enable myapp\"\n```\n\n**What you get:**\n- Dedicated bucket: `hostkit-{project}`\n- S3-compatible credentials in `.env`\n- AWS SDK compatible",
    "section": "R2 Storage Service",
    "chunkType": "command",
    "tokens": [
      "overview",
      "hostkit",
      "provides",
      "compatible",
      "object",
      "storage",
      "via",
      "cloudflare",
      "with",
      "zero",
      "egress",
      "fees",
      "enable",
      "hostkit",
      "execute",
      "command",
      "enable",
      "myapp",
      "what",
      "you",
      "get",
      "dedicated",
      "bucket",
      "hostkit",
      "project",
      "compatible",
      "credentials",
      "env",
      "aws",
      "sdk",
      "compatible"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "environment-variables-auto-set-36",
    "title": "Environment Variables (auto-set)",
    "content": "```bash\n# R2-specific\nR2_ENDPOINT=https://{account_id}.r2.cloudflarestorage.com\nR2_ACCESS_KEY_ID=...\nR2_SECRET_ACCESS_KEY=...\nR2_BUCKET=hostkit-myapp\n\n# AWS-compatible (for boto3, aws-sdk)\nAWS_ENDPOINT_URL_S3=https://{account_id}.r2.cloudflarestorage.com\nAWS_ACCESS_KEY_ID=...\nAWS_SECRET_ACCESS_KEY=...\nAWS_DEFAULT_REGION=auto\n```",
    "section": "R2 Storage Service",
    "chunkType": "command",
    "tokens": [
      "environment",
      "variables",
      "auto",
      "set",
      "bash",
      "specific",
      "endpoint",
      "https",
      "account",
      "cloudflarestorage",
      "com",
      "access",
      "key",
      "secret",
      "access",
      "key",
      "bucket",
      "hostkit",
      "myapp",
      "aws",
      "compatible",
      "for",
      "boto3",
      "aws",
      "sdk",
      "aws",
      "endpoint",
      "url",
      "https",
      "account",
      "cloudflarestorage",
      "com",
      "aws",
      "access",
      "key",
      "aws",
      "secret",
      "access",
      "key",
      "aws",
      "default",
      "region",
      "auto"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "cli-operations-37",
    "title": "CLI Operations",
    "content": "```\nhostkit_execute: command=\"r2 upload myapp /tmp/logo.png images/logo.png\"\nhostkit_execute: command=\"r2 list myapp --prefix images/\"\nhostkit_execute: command=\"r2 download myapp images/logo.png /tmp/logo.png\"\nhostkit_execute: command=\"r2 presign myapp images/logo.png\"\nhostkit_execute: command=\"r2 presign myapp uploads/new.pdf --method PUT --expires 600\"\n```",
    "section": "R2 Storage Service",
    "chunkType": "example",
    "tokens": [
      "cli",
      "operations",
      "hostkit",
      "execute",
      "command",
      "upload",
      "myapp",
      "tmp",
      "logo",
      "png",
      "images",
      "logo",
      "png",
      "hostkit",
      "execute",
      "command",
      "list",
      "myapp",
      "prefix",
      "images",
      "hostkit",
      "execute",
      "command",
      "download",
      "myapp",
      "images",
      "logo",
      "png",
      "tmp",
      "logo",
      "png",
      "hostkit",
      "execute",
      "command",
      "presign",
      "myapp",
      "images",
      "logo",
      "png",
      "hostkit",
      "execute",
      "command",
      "presign",
      "myapp",
      "uploads",
      "new",
      "pdf",
      "method",
      "put",
      "expires",
      "600"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "python-sdk-usage-38",
    "title": "Python SDK Usage",
    "content": "```python\nimport os\nimport boto3\n\ns3 = boto3.client(\n    \"s3\",\n    endpoint_url=os.environ[\"R2_ENDPOINT\"],\n    aws_access_key_id=os.environ[\"R2_ACCESS_KEY_ID\"],\n    aws_secret_access_key=os.environ[\"R2_SECRET_ACCESS_KEY\"],\n    region_name=\"auto\",\n)\n\n# Upload\ns3.upload_file(\"local.txt\", os.environ[\"R2_BUCKET\"], \"remote.txt\")\n\n# Presigned URL\nurl = s3.generate_presigned_url(\n    \"get_object\",\n    Params={\"Bucket\": os.environ[\"R2_BUCKET\"], \"Key\": \"remote.txt\"},\n    ExpiresIn=3600,\n)\n```",
    "section": "R2 Storage Service",
    "chunkType": "example",
    "tokens": [
      "python",
      "sdk",
      "usage",
      "python",
      "import",
      "import",
      "boto3",
      "boto3",
      "client",
      "endpoint",
      "url",
      "environ",
      "endpoint",
      "aws",
      "access",
      "key",
      "environ",
      "access",
      "key",
      "aws",
      "secret",
      "access",
      "key",
      "environ",
      "secret",
      "access",
      "key",
      "region",
      "name",
      "auto",
      "upload",
      "upload",
      "file",
      "local",
      "txt",
      "environ",
      "bucket",
      "remote",
      "txt",
      "presigned",
      "url",
      "url",
      "generate",
      "presigned",
      "url",
      "get",
      "object",
      "params",
      "bucket",
      "environ",
      "bucket",
      "key",
      "remote",
      "txt",
      "expiresin",
      "3600"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "node-js-sdk-usage-39",
    "title": "Node.js SDK Usage",
    "content": "```javascript\nimport { S3Client, PutObjectCommand } from \"@aws-sdk/client-s3\";\n\nconst s3 = new S3Client({\n  endpoint: process.env.R2_ENDPOINT,\n  credentials: {\n    accessKeyId: process.env.R2_ACCESS_KEY_ID,\n    secretAccessKey: process.env.R2_SECRET_ACCESS_KEY,\n  },\n  region: \"auto\",\n});\n\nawait s3.send(new PutObjectCommand({\n  Bucket: process.env.R2_BUCKET,\n  Key: \"uploads/file.txt\",\n  Body: fileBuffer,\n}));\n```",
    "section": "R2 Storage Service",
    "chunkType": "example",
    "tokens": [
      "node",
      "sdk",
      "usage",
      "javascript",
      "import",
      "s3client",
      "putobjectcommand",
      "from",
      "aws",
      "sdk",
      "client",
      "const",
      "new",
      "s3client",
      "endpoint",
      "process",
      "env",
      "endpoint",
      "credentials",
      "accesskeyid",
      "process",
      "env",
      "access",
      "key",
      "secretaccesskey",
      "process",
      "env",
      "secret",
      "access",
      "key",
      "region",
      "auto",
      "await",
      "send",
      "new",
      "putobjectcommand",
      "bucket",
      "process",
      "env",
      "bucket",
      "key",
      "uploads",
      "file",
      "txt",
      "body",
      "filebuffer"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "cost-model-40",
    "title": "Cost Model",
    "content": "- Storage: $0.015/GB/month\n- Writes: $4.50/million operations\n- Reads: $0.36/million operations\n- **Egress: FREE**\n\n---",
    "section": "R2 Storage Service",
    "chunkType": "concept",
    "tokens": [
      "cost",
      "model",
      "storage",
      "015",
      "month",
      "writes",
      "million",
      "operations",
      "reads",
      "million",
      "operations",
      "egress",
      "free"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "overview-41",
    "title": "Overview",
    "content": "HostKit Vector provides pgvector-based semantic search for RAG applications.\n\n**Enable:**\n```\nhostkit_execute: command=\"vector enable myapp\"\n```\n\n**What you get:**\n- PostgreSQL with pgvector extension\n- Separate vector database\n- OpenAI embeddings integration",
    "section": "Vector/RAG Service",
    "chunkType": "command",
    "tokens": [
      "overview",
      "hostkit",
      "vector",
      "provides",
      "pgvector",
      "based",
      "semantic",
      "search",
      "for",
      "rag",
      "applications",
      "enable",
      "hostkit",
      "execute",
      "command",
      "vector",
      "enable",
      "myapp",
      "what",
      "you",
      "get",
      "postgresql",
      "with",
      "pgvector",
      "extension",
      "separate",
      "vector",
      "database",
      "openai",
      "embeddings",
      "integration"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "operations-42",
    "title": "Operations",
    "content": "```\nhostkit_execute: command=\"vector create-collection myapp documents\"\nhostkit_execute: command=\"vector search myapp documents 'query text'\"\n```",
    "section": "Vector/RAG Service",
    "chunkType": "example",
    "tokens": [
      "operations",
      "hostkit",
      "execute",
      "command",
      "vector",
      "create",
      "collection",
      "myapp",
      "documents",
      "hostkit",
      "execute",
      "command",
      "vector",
      "search",
      "myapp",
      "documents",
      "query",
      "text"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "python-usage-43",
    "title": "Python Usage",
    "content": "```python\nimport os\nimport psycopg2\nfrom openai import OpenAI\n\nclient = OpenAI()\nconn = psycopg2.connect(os.environ[\"VECTOR_DATABASE_URL\"])\n\n# Create embedding\nresponse = client.embeddings.create(\n    input=\"search query\",\n    model=\"text-embedding-3-small\"\n)\nembedding = response.data[0].embedding\n\n# Search\ncur = conn.cursor()\ncur.execute(\"\"\"\n    SELECT content, 1 - (embedding <=> %s::vector) as similarity\n    FROM documents\n    ORDER BY embedding <=> %s::vector\n    LIMIT 5\n\"\"\", (embedding, embedding))\n```\n\n---",
    "section": "Vector/RAG Service",
    "chunkType": "example",
    "tokens": [
      "python",
      "usage",
      "python",
      "import",
      "import",
      "psycopg2",
      "from",
      "openai",
      "import",
      "openai",
      "client",
      "openai",
      "conn",
      "psycopg2",
      "connect",
      "environ",
      "vector",
      "database",
      "url",
      "create",
      "embedding",
      "response",
      "client",
      "embeddings",
      "create",
      "input",
      "search",
      "query",
      "model",
      "text",
      "embedding",
      "small",
      "embedding",
      "response",
      "data",
      "embedding",
      "search",
      "cur",
      "conn",
      "cursor",
      "cur",
      "execute",
      "select",
      "content",
      "embedding",
      "vector",
      "similarity",
      "from",
      "documents",
      "order",
      "embedding",
      "vector",
      "limit",
      "embedding",
      "embedding"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "create-backup-44",
    "title": "Create Backup",
    "content": "```\nhostkit_execute: command=\"backup create myapp\"           # Local only\nhostkit_execute: command=\"backup create myapp --r2\"      # Local + R2 sync\nhostkit_execute: command=\"backup create myapp --type db\" # Database only\n```",
    "section": "Backup Service",
    "chunkType": "example",
    "tokens": [
      "create",
      "backup",
      "hostkit",
      "execute",
      "command",
      "backup",
      "create",
      "myapp",
      "local",
      "only",
      "hostkit",
      "execute",
      "command",
      "backup",
      "create",
      "myapp",
      "local",
      "sync",
      "hostkit",
      "execute",
      "command",
      "backup",
      "create",
      "myapp",
      "type",
      "database",
      "only"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "list-backups-45",
    "title": "List Backups",
    "content": "```\nhostkit_execute: command=\"backup list myapp\"\nhostkit_execute: command=\"backup list myapp --r2\"  # Show R2 sync status\n```",
    "section": "Backup Service",
    "chunkType": "example",
    "tokens": [
      "list",
      "backups",
      "hostkit",
      "execute",
      "command",
      "backup",
      "list",
      "myapp",
      "hostkit",
      "execute",
      "command",
      "backup",
      "list",
      "myapp",
      "show",
      "sync",
      "status"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "restore-46",
    "title": "Restore",
    "content": "```\nhostkit_execute: command=\"backup restore myapp <backup_id>\"\nhostkit_execute: command=\"backup restore myapp <backup_id> --from-r2\"  # Download from R2 if local missing\n```",
    "section": "Backup Service",
    "chunkType": "example",
    "tokens": [
      "restore",
      "hostkit",
      "execute",
      "command",
      "backup",
      "restore",
      "myapp",
      "backup",
      "hostkit",
      "execute",
      "command",
      "backup",
      "restore",
      "myapp",
      "backup",
      "from",
      "download",
      "from",
      "local",
      "missing"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "retention-policies-47",
    "title": "Retention Policies",
    "content": "| Location | Daily | Weekly | Max Age |\n|----------|-------|--------|---------|\n| Local | 7 | 4 (Mondays) | 35 days |\n| R2 Cloud | 30 | 12 (Mondays) | 120 days |",
    "section": "Backup Service",
    "chunkType": "concept",
    "tokens": [
      "retention",
      "policies",
      "location",
      "daily",
      "weekly",
      "max",
      "age",
      "local",
      "mondays",
      "days",
      "cloud",
      "mondays",
      "120",
      "days"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "r2-cloud-commands-48",
    "title": "R2 Cloud Commands",
    "content": "```\nhostkit_execute: command=\"backup r2 status\"\nhostkit_execute: command=\"backup r2 list myapp\"\nhostkit_execute: command=\"backup r2 sync <backup_id>\"\nhostkit_execute: command=\"backup r2 rotate myapp\"\nhostkit_execute: command=\"backup r2 download <backup_id>\"\n```\n\n---",
    "section": "Backup Service",
    "chunkType": "service",
    "tokens": [
      "cloud",
      "commands",
      "hostkit",
      "execute",
      "command",
      "backup",
      "status",
      "hostkit",
      "execute",
      "command",
      "backup",
      "list",
      "myapp",
      "hostkit",
      "execute",
      "command",
      "backup",
      "sync",
      "backup",
      "hostkit",
      "execute",
      "command",
      "backup",
      "rotate",
      "myapp",
      "hostkit",
      "execute",
      "command",
      "backup",
      "download",
      "backup"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "add-custom-domain-49",
    "title": "Add Custom Domain",
    "content": "```\nhostkit_execute: command=\"nginx add myapp example.com\"\n```\n\n**Prerequisites:**\n- DNS pointing to VPS (145.223.74.213)\n- SSL certificate (provision with certbot)",
    "section": "Nginx/Domain Service",
    "chunkType": "example",
    "tokens": [
      "add",
      "custom",
      "domain",
      "hostkit",
      "execute",
      "command",
      "nginx",
      "add",
      "myapp",
      "example",
      "com",
      "prerequisites",
      "dns",
      "pointing",
      "vps",
      "145",
      "223",
      "213",
      "ssl",
      "certificate",
      "provision",
      "with",
      "certbot"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "wildcard-ssl-custom-domains-50",
    "title": "Wildcard SSL (Custom Domains)",
    "content": "For wildcard certificates on custom domains:\n\n1. Migrate DNS to Cloudflare\n2. Create API token with \"Edit zone DNS\" permission\n3. Create credentials file on VPS\n4. Run certbot with DNS challenge\n5. Add domain via nginx add\n\n---",
    "section": "Nginx/Domain Service",
    "chunkType": "concept",
    "tokens": [
      "wildcard",
      "ssl",
      "custom",
      "domains",
      "for",
      "wildcard",
      "certificates",
      "custom",
      "domains",
      "migrate",
      "dns",
      "cloudflare",
      "create",
      "api",
      "token",
      "with",
      "edit",
      "zone",
      "dns",
      "permission",
      "create",
      "credentials",
      "file",
      "vps",
      "run",
      "certbot",
      "with",
      "dns",
      "challenge",
      "add",
      "domain",
      "via",
      "nginx",
      "add"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "overview-51",
    "title": "Overview",
    "content": "HostKit Mail provides email sending and receiving via Postfix/Dovecot.\n\n**Enable:**\n```\nhostkit_execute: command=\"mail enable myapp\"\n```",
    "section": "Mail Service",
    "chunkType": "command",
    "tokens": [
      "overview",
      "hostkit",
      "mail",
      "provides",
      "email",
      "sending",
      "and",
      "receiving",
      "via",
      "postfix",
      "dovecot",
      "enable",
      "hostkit",
      "execute",
      "command",
      "mail",
      "enable",
      "myapp"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "generate-image-52",
    "title": "Generate Image",
    "content": "```\nhostkit_execute: command=\"image generate myapp 'A futuristic city at sunset'\"\nhostkit_execute: command=\"image generate myapp 'A cat' --width 512 --height 512\"\nhostkit_execute: command=\"image generate myapp 'A landscape' --model flux-1.1-pro-ultra --aspect-ratio 16:9\"\n```",
    "section": "Image Service",
    "chunkType": "example",
    "tokens": [
      "generate",
      "image",
      "hostkit",
      "execute",
      "command",
      "image",
      "generate",
      "myapp",
      "futuristic",
      "city",
      "sunset",
      "hostkit",
      "execute",
      "command",
      "image",
      "generate",
      "myapp",
      "cat",
      "width",
      "512",
      "height",
      "512",
      "hostkit",
      "execute",
      "command",
      "image",
      "generate",
      "myapp",
      "landscape",
      "model",
      "flux",
      "pro",
      "ultra",
      "aspect",
      "ratio"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "models-53",
    "title": "Models",
    "content": "| Model | Cost | Constraints |\n|-------|------|-------------|\n| flux-1.1-pro | $0.04 | 256-1440px, multiple of 32 |\n| flux-1.1-pro-ultra | $0.06 | Aspect ratio 21:9 to 9:21 |",
    "section": "Image Service",
    "chunkType": "concept",
    "tokens": [
      "models",
      "model",
      "cost",
      "constraints",
      "flux",
      "pro",
      "256",
      "1440px",
      "multiple",
      "flux",
      "pro",
      "ultra",
      "aspect",
      "ratio"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "usage-54",
    "title": "Usage",
    "content": "```\nhostkit_execute: command=\"image usage myapp\"\nhostkit_execute: command=\"image history myapp\"\n```\n\n---",
    "section": "Image Service",
    "chunkType": "example",
    "tokens": [
      "usage",
      "hostkit",
      "execute",
      "command",
      "image",
      "usage",
      "myapp",
      "hostkit",
      "execute",
      "command",
      "image",
      "history",
      "myapp"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "web-portal-55",
    "title": "Web Portal",
    "content": "```\nhostkit_execute: command=\"secrets portal myapp\"\n```\n\nReturns a magic link for the web-based secrets editor.",
    "section": "Secrets Service",
    "chunkType": "example",
    "tokens": [
      "web",
      "portal",
      "hostkit",
      "execute",
      "command",
      "secrets",
      "portal",
      "myapp",
      "returns",
      "magic",
      "link",
      "for",
      "the",
      "web",
      "based",
      "secrets",
      "editor"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "backup-restore-56",
    "title": "Backup/Restore",
    "content": "```\nhostkit_execute: command=\"db backup myapp\"\nhostkit_execute: command=\"db restore myapp <backup_file>\"\n```\n\n---",
    "section": "Database Service",
    "chunkType": "example",
    "tokens": [
      "backup",
      "restore",
      "hostkit",
      "execute",
      "command",
      "backup",
      "myapp",
      "hostkit",
      "execute",
      "command",
      "restore",
      "myapp",
      "backup",
      "file"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "control-services-57",
    "title": "Control Services",
    "content": "```\nhostkit_execute: command=\"service start myapp\"\nhostkit_execute: command=\"service stop myapp\"\nhostkit_execute: command=\"service restart myapp\"\n```",
    "section": "Service Management",
    "chunkType": "service",
    "tokens": [
      "control",
      "services",
      "hostkit",
      "execute",
      "command",
      "service",
      "start",
      "myapp",
      "hostkit",
      "execute",
      "command",
      "service",
      "stop",
      "myapp",
      "hostkit",
      "execute",
      "command",
      "service",
      "restart",
      "myapp"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "view-logs-58",
    "title": "View Logs",
    "content": "```\nhostkit_execute: command=\"service logs myapp\"\nhostkit_execute: command=\"service logs myapp --follow\"\n```",
    "section": "Service Management",
    "chunkType": "example",
    "tokens": [
      "view",
      "logs",
      "hostkit",
      "execute",
      "command",
      "service",
      "logs",
      "myapp",
      "hostkit",
      "execute",
      "command",
      "service",
      "logs",
      "myapp",
      "follow"
    ],
    "source": "SERVICES.md"
  },
  {
    "id": "health-check-59",
    "title": "Health Check",
    "content": "```\nhostkit_execute: command=\"health myapp\"\n```\n\nReturns detailed health information for the project and all enabled services.",
    "section": "Service Management",
    "chunkType": "example",
    "tokens": [
      "health",
      "check",
      "hostkit",
      "execute",
      "command",
      "health",
      "myapp",
      "returns",
      "detailed",
      "health",
      "information",
      "for",
      "the",
      "project",
      "and",
      "all",
      "enabled",
      "services"
    ],
    "source": "SERVICES.md"
  }
]